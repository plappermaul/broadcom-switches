config show; attach; version
    phy_chain_rx_polarity_flip_physical{16.0}=1
    phy_chain_tx_lane_map_physical{49.0}=0x2130
    phy_chain_rx_polarity_flip_physical{59.0}=1
    phy_chain_rx_polarity_flip_physical{68.0}=1
    portmap_9=9:100
    phy_chain_rx_lane_map_physical{21.0}=0x1302
    phy_chain_rx_lane_map_physical{29.0}=0x1302
    phy_chain_rx_polarity_flip_physical{34.0}=1
    phy_chain_tx_polarity_flip_physical{52.0}=1
    phy_chain_rx_lane_map_physical{5.0}=0x1302
    phy_chain_tx_lane_map_physical{33.0}=0x0312
    phy_chain_tx_polarity_flip_physical{61.0}=1
    pp_clock_frequency=833
    phy_chain_tx_polarity_flip_physical{35.0}=1
    phy_chain_tx_lane_map_physical{1.0}=0x0213
    phy_chain_rx_polarity_flip_physical{2.0}=0
    phy_chain_tx_lane_map_physical{9.0}=0x0213
    phy_chain_rx_lane_map_physical{13.0}=0x1302
    phy_chain_tx_polarity_flip_physical{44.0}=1
    portmap_21=21:25
    portmap_13=13:100
    phy_chain_tx_lane_map_physical{25.0}=0x0312
    phy_chain_tx_polarity_flip_physical{10.0}=0
    phy_chain_rx_lane_map_physical{65.0}=0x0213
    phy_chain_tx_polarity_flip_physical{53.0}=1
    portmap_30=30:25
    portmap_22=22:25
    oversubscribe_mode=2
    phy_chain_rx_polarity_flip_physical{44.0}=1
    phy_chain_tx_polarity_flip_physical{62.0}=1
    phy_chain_tx_polarity_flip_physical{27.0}=1
    portmap_31=31:25
    portmap_23=23:25
    phy_chain_rx_polarity_flip_physical{18.0}=0
    phy_chain_rx_polarity_flip_physical{3.0}=1
    portmap_40=40:25
    portmap_32=32:25
    portmap_24=24:25
    phy_chain_tx_lane_map_physical{17.0}=0x0213
    phy_chain_rx_lane_map_physical{57.0}=0x0312
    phy_chain_rx_polarity_flip_physical{27.0}=1
    phy_chain_tx_polarity_flip_physical{45.0}=1
    portmap_41=41:25
    portmap_33=33:25
    portmap_25=25:25
    portmap_17=17:100
    phy_chain_tx_lane_map_physical{61.0}=0x1032
    phy_chain_tx_polarity_flip_physical{11.0}=0
    phy_chain_rx_polarity_flip_physical{36.0}=1
    phy_chain_tx_polarity_flip_physical{54.0}=1
    portmap_50=50:25
    portmap_42=42:25
    portmap_34=34:25
    portmap_26=26:25
    management_port_mode=0
    phy_chain_tx_polarity_flip_physical{63.0}=1
    portmap_51=51:25
    phy_chain_rx_lane_map_physical{41.0}=0x1203
    portmap_43=43:25
    portmap_35=35:25
    portmap_27=27:25
    phy_chain_rx_polarity_flip_physical{11.0}=1
    phy_chain_rx_lane_map_physical{49.0}=0x0312
    phy_chain_rx_polarity_flip_physical{19.0}=1
    phy_chain_tx_polarity_flip_physical{37.0}=1
    portmap_60=60:25
    portmap_52=52:25
    portmap_44=44:25
    portmap_36=36:25
    portmap_28=28:25
    phy_chain_tx_lane_map_physical{53.0}=0x1032
    phy_chain_rx_polarity_flip_physical{63.0}=1
    phy_chain_tx_polarity_flip_physical{46.0}=1
    portmap_61=61:25
    portmap_53=53:25
    portmap_45=45:25
    portmap_37=37:25
    portmap_29=29:25
    phy_chain_tx_polarity_flip_physical{12.0}=0
    phy_chain_rx_polarity_flip_physical{37.0}=1
    phy_chain_tx_polarity_flip_physical{55.0}=1
    fpem_mem_entries=32768
    phy_chain_rx_lane_map_physical{33.0}=0x3102
    portmap_62=62:25
    pbmp_xport_xe=0x1fffffffffffe22226
    portmap_54=54:25
    portmap_46=46:25
    portmap_38=38:25
    l2_mem_entries=32768
    os=unix
    portmap_63=63:25
    portmap_55=55:25
    portmap_47=47:25
    portmap_39=39:25
    bcm_tdm_frequency=1252
    phy_chain_tx_lane_map_physical{45.0}=0x1032
    phy_chain_rx_polarity_flip_physical{55.0}=1
    phy_chain_tx_polarity_flip_physical{38.0}=1
    portmap_64=64:25
    portmap_56=56:25
    portmap_48=48:25
    phy_chain_rx_polarity_flip_physical{64.0}=1
    phy_chain_tx_polarity_flip_physical{47.0}=1
    phy_chain_rx_lane_map_physical{25.0}=0x3021
    portmap_65=65:25
    portmap_57=57:25
    portmap_49=49:25
    phy_chain_rx_lane_map_physical{1.0}=0x3021
    phy_chain_rx_polarity_flip_physical{38.0}=1
    phy_chain_rx_lane_map_physical{9.0}=0x3021
    portmap_66=66:25
    portmap_58=58:25
    phy_chain_tx_lane_map_physical{37.0}=0x1032
    phy_chain_rx_polarity_flip_physical{47.0}=1
    phy_chain_tx_polarity_flip_physical{65.0}=1
    portmap_67=67:25
    portmap_59=59:25
    phy_chain_rx_polarity_flip_physical{56.0}=1
    port_oversubscribe{1}=0
    phy_chain_tx_polarity_flip_physical{39.0}=1
    phy_chain_tx_lane_map_physical{5.0}=0x3210
    phy_chain_rx_lane_map_physical{17.0}=0x3021
    portmap_68=68:25
    phy_chain_tx_lane_map_physical{21.0}=0x3210
    phy_chain_rx_lane_map_physical{61.0}=0x2031
    phy_chain_rx_polarity_flip_physical{31.0}=1
    core_clock_frequency=1252
    phy_chain_tx_lane_map_physical{29.0}=0x3210
    port_oversubscribe{2}=0
    phy_chain_rx_polarity_flip_physical{48.0}=1
    phy_chain_tx_polarity_flip_physical{66.0}=1
    phy_chain_tx_polarity_flip_physical{32.0}=1
    port_oversubscribe{3}=0
    phy_chain_rx_polarity_flip_physical{7.0}=1
    phy_chain_tx_polarity_flip_physical{8.0}=1
    phy_chain_tx_lane_map_physical{13.0}=0x3210
    phy_chain_rx_lane_map_physical{53.0}=0x2031
    phy_chain_rx_polarity_flip_physical{23.0}=1
    portmap_1=1:25:m
    phy_chain_rx_polarity_flip_physical{32.0}=1
    phy_chain_tx_lane_map_physical{65.0}=0x2130
    phy_chain_tx_polarity_flip_physical{50.0}=1
    flow_init_mode=1
    portmap_2=2:25:m
    phy_chain_tx_polarity_flip_physical{58.0}=1
    port_oversubscribe{4}=0
    phy_chain_rx_polarity_flip_physical{41.0}=1
    phy_chain_tx_polarity_flip_physical{24.0}=1
    phy_chain_rx_lane_map_physical{45.0}=0x2031
    phy_chain_rx_polarity_flip_physical{15.0}=1
    phy_chain_tx_polarity_flip_physical{33.0}=1
    pbmp_oversubscribe=0x1fffffffffffe22220
    l3_mem_entries=32768
    phy_chain_rx_polarity_flip_physical{8.0}=1
    phy_chain_rx_polarity_flip_physical{24.0}=1
    phy_chain_tx_lane_map_physical{57.0}=0x2130
    phy_chain_tx_polarity_flip_physical{42.0}=1
    portmap_5=5:100
    phy_chain_rx_polarity_flip_physical{33.0}=1
    phy_chain_tx_polarity_flip_physical{16.0}=1
    phy_chain_rx_lane_map_physical{37.0}=0x3102
    phy_chain_rx_polarity_flip_physical{42.0}=1
    phy_chain_tx_polarity_flip_physical{60.0}=1
    phy_chain_tx_polarity_flip_physical{25.0}=1
    phy_chain_tx_lane_map_physical{41.0}=0x2130
    phy_chain_rx_polarity_flip_physical{51.0}=1
Attach: Unit 0 (BCM56470_A0): attached (current unit)
Broadcom Command Monitor: Copyright (c) 1998-2020 Broadcom
Release: sdk-6.5.20 built 20200416 (Thu Apr 16 08:06:05 2020)
From sdkrel@lc-sj1-3768:/projects/ntsw_sw14_scratch/sdkrel/regress/sdk-master/src/sdk.dpart.56470
Platform: SLK_BCM957812
OS: Unix (Posix)
Chips:
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
       BCM56470_A0,
      
PHYs:  BCM5218, BCM5220/21, BCM5226, BCM5228,
    BCM5238, BCM5248, BCM5400, BCM5401,
    BCM5402, BCM5404, BCM5424/34, BCM5411,
    BCM5461, BCM5464, BCM5466, BCM5478,
    BCM5488, BCM54980, BCM54980, BCM54980,
    BCM54980, BCM53314, BCM5482/801x, BCM54684,
    BCM54640, BCM54682E, BCM54684E, BCM54685,
    BCM54616, BCM54618E, BCM54618SE, BCM84707,
    BCM84073, BCM84074, BCM84728, BCM84748,
    BCM84727, BCM84747, BCM84762, BCM84764,
    BCM84042, BCM84044, BCM8806X, BCM54182,
    BCM54185, BCM54180, BCM54140, BCM54192,
    BCM54195, BCM54190, BCM54194, BCM54210,
    BCM54220, BCM54280, BCM54282, BCM54240,
    BCM54285, BCM5428X, BCM54290, BCM54292,
    BCM54294, BCM54295, BCM54296, BCM5421S
    BCM54680, BCM53324, BCM56160-GPHY, BCM53540-GPHY,
    BCM56275-GPHY, BCM54880, BCM54881, BCM54810,
    BCM54811, BCM54640E, BCM54880E, BCM54680E,
    BCM52681E, BCM8703, BCM8704, BCM8705/24/25,
    BCM8706/8726, BCM8727, BCM8728/8747, BCM8072,
    BCM8073, BCM8074, BCM8040, BCM8481X,
    BCM84812, BCM84821, BCM84822, BCM84823,
    BCM84833, BCM84834, BCM84835, BCM84836,
    BCM84844, BCM84846, BCM84848, BCM84858,
    BCM84856, BCM84860, BCM84861, BCM84864,
    BCM84868, BCM84888, BCM84884, BCM84888E,
    BCM84884E, BCM84881, BCM84880, BCM84888S,
    BCM84887, BCM84886, BCM84885, BCM8750,
    BCM8752, BCM8754, BCM84740, BCM84164,
    BCM84758, BCM84780, BCM84784, BCM84318,
    BCM84328, BCM84793, BCM82328, Furia
    Huracan, Sesto, Madura, BCM82780,
    copper sfp
   
~~~ #1) test_setup(): ** start **
~~~ #1) test_setup(): ** end **
~~~ #2) config_vxlan_ipv4_vtep(): ** start **
Configure Vxlan Global Configuration.
Get flow-handler for Classic_Vxlan
Create Multicast group for UUC/MC/BC.
Create Flow VPN.
Configure Vxlan Access Port Configuration.
Create access L3 interface
Create access L3 Egress object.
Create Access Flow Port (VP).
Create Flow VP.
Access: Add flow match (match: port,vlan criteria).
Access: Set Encapsulation. VP=>egress-obj{Device,Port}.
setting 0x9100 as a inner tpid on access port from its default value 0x8100
int $$ = 0 (0x0)
int $$ = 0 (0x0)
Configure Vxlan Network Port Configuration.
Create network L3 interface
Create network L3 Egress object.
Create Network Flow Port.
Create Flow VP.
Network: encap add, VFI-->VNID
Network: Configure match condition to derive VPN (Match: {VN_ID}, Derive: VFI (VPN))
Network; Set Encapsulation. VP=>egress-obj{Device,Port}.
Network: Set Egress-vlan-xlate key-type for network VP
Network: Add flow match (match: SIP => network SVP)
Tunnel_init: Create Flow Tunnel Initiator.
Tunnel_term: Create Flow Tunnel Terminator.
Network-to-Access: Add payload-src-mac Address => Access-flow-port (VP).
~~~ #2) config_vxlan_ipv4_vtep(): ** end **
~~~ #3) verify(): ** start **
Current header mode for unit 0 is now Ieee (0).
vlan 1	ports cpu,ce,xe (0x00000000000000000000000000000000000000000000001fffffffffffe22227), untagged ce,xe (0x00000000000000000000000000000000000000000000001fffffffffffe22226) MCAST_FLOOD_UNKNOWN
vlan 21	ports xe0 (0x0000000000000000000000000000000000000000000000000000000000000002), untagged none (0x0000000000000000000000000000000000000000000000000000000000000000) MCAST_FLOOD_UNKNOWN
vlan 22	ports xe1 (0x0000000000000000000000000000000000000000000000000000000000000004), untagged none (0x0000000000000000000000000000000000000000000000000000000000000000) MCAST_FLOOD_UNKNOWN
mac=00:00:00:00:bb:bb vlan=28688 GPORT=0xb0000001 port=0xb0000001(flow) Static
mac=00:00:00:00:22:22 vlan=22 GPORT=0x0 modid=0 port=0/cpu0 Static CPU

Sending known unicast packet with vnid 12345 to ingress_port network side:2
Packet from data=<>, length=160
[bcmPW.0]
[bcmPW.0]Packet[1]: data[0000]: {000000002222} {000000000002} 8100 0016
[bcmPW.0]Packet[1]: data[0010]: 0800 4500 0082 0000 4000 3f11 65b7 c0a8 
[bcmPW.0]Packet[1]: data[0020]: 0101 0a0a 0a01 d903 2118 006e 790b 0800 
[bcmPW.0]Packet[1]: data[0030]: 0000 0123 4500 0000 0000 bbbb 0000 0000 
[bcmPW.0]Packet[1]: data[0040]: aaaa 8100 0015 9100 0004 0800 4500 0050 
[bcmPW.0]Packet[1]: data[0050]: 0001 0000 4011 7497 0202 0202 0101 0101 
[bcmPW.0]Packet[1]: data[0060]: 0035 0035 003c 32f6 7465 7374 7465 7374 
[bcmPW.0]Packet[1]: data[0070]: 7465 7374 7465 7374 7465 7374 7465 7374 
[bcmPW.0]Packet[1]: data[0080]: 7465 7374 7465 7374 7465 7374 7465 7374 
[bcmPW.0]Packet[1]: data[0090]: 7465 7374 7465 7374 7465 7374 d8c6 9fd8 
[bcmPW.0]Packet[1]: length 160 (160). rx-port 2. cos 0. prio_int 0. vlan 28688. reason 0x1. Outer tagged.
[bcmPW.0]Packet[1]: dest-gport -1342177279. src-gport -1342177278. opcode 1.  matched 0. classification-tag 0.
[bcmPW.0]Packet[1]: reasons: FilterMatch
[bcmPW.0]Packet[1]: 
Packet[1]:   Ethernet: dst<00:00:00:00:22:22> src<00:00:00:00:00:02> Tagged Packet ProtID<0x8100> Ctrl<0x0016> Internet Protocol (IP)
Packet[1]:   IP: V(4) src<192.168.1.1> dst<10.10.10.1> hl<5> service-type<0> tl<130> id<0> frg-off<16384> ttl<63> > chk-sum<0x65b7>
[bcmPW.0]
[bcmPW.0]Packet[2]: data[0000]: {00000000bbbb} {00000000aaaa} 8100 0064
[bcmPW.0]Packet[2]: data[0010]: 8100 00c8 0800 4500 0050 0001 0000 4011 
[bcmPW.0]Packet[2]: data[0020]: 7497 0202 0202 0101 0101 0035 0035 003c 
[bcmPW.0]Packet[2]: data[0030]: 32f6 7465 7374 7465 7374 7465 7374 7465 
[bcmPW.0]Packet[2]: data[0040]: 7374 7465 7374 7465 7374 7465 7374 7465 
[bcmPW.0]Packet[2]: data[0050]: 7374 7465 7374 7465 7374 7465 7374 7465 
[bcmPW.0]Packet[2]: data[0060]: 7374 7465 7374 3799 7afd 
[bcmPW.0]Packet[2]: length 106 (106). rx-port 1. cos 0. prio_int 0. vlan 100. reason 0x1. Double tagged.
[bcmPW.0]Packet[2]: dest-port 0. dest-mod 0. src-port 1. src-mod 0. opcode 0.  matched 0. classification-tag 0.
[bcmPW.0]Packet[2]: reasons: FilterMatch
[bcmPW.0]Packet[2]: 
Packet[2]:   Ethernet: dst<00:00:00:00:bb:bb> src<00:00:00:00:aa:aa> Tagged Packet ProtID<0x8100> Ctrl<0x0064> Wellfleet Communications
MC_PERQ_PKT(0).cpu0	    :			  2		     +2 	      2/s
MC_PERQ_BYTE(0).cpu0	    :			266		   +266 	    253/s
RUC_64.xe0		    :			  1		     +1 	      1/s
ING_NIV_RX_FRAMES_VL.xe0    :			  1		     +1 	      1/s
R127.xe0		    :			  1		     +1 	      1/s
RPKT.xe0		    :			  1		     +1 	      1/s
RUCA.xe0		    :			  1		     +1 	      1/s
RPRM.xe0		    :			  1		     +1 	      1/s
RVLN.xe0		    :			  1		     +1 	      1/s
RDVLN.xe0		    :			  1		     +1 	      1/s
RPOK.xe0		    :			  1		     +1 	      1/s
RBYT.xe0		    :			106		   +106 	    101/s
T127.xe0		    :			  1		     +1 	      1/s
TPOK.xe0		    :			  1		     +1 	      1/s
TPKT.xe0		    :			  1		     +1 	      1/s
TUCA.xe0		    :			  1		     +1 	      1/s
TVLN.xe0		    :			  1		     +1 	      1/s
TDVLN.xe0		    :			  1		     +1 	      1/s
TBYT.xe0		    :			106		   +106 	    101/s
RPROG2.xe0		    :			  1		     +1 	      1/s
UC_PERQ_PKT(0).xe0	    :			  1		     +1 	      1/s
UC_PERQ_BYTE(0).xe0	    :			106		   +106 	    101/s
RDISC_64.xe1		    :			  1		     +1 	      1/s
RUC_64.xe1		    :			  1		     +1 	      1/s
ING_NIV_RX_FRAMES_VL.xe1    :			  1		     +1 	      1/s
R255.xe1		    :			  1		     +1 	      1/s
RPKT.xe1		    :			  1		     +1 	      1/s
RUCA.xe1		    :			  1		     +1 	      1/s
RPRM.xe1		    :			  1		     +1 	      1/s
RVLN.xe1		    :			  1		     +1 	      1/s
RPOK.xe1		    :			  1		     +1 	      1/s
RBYT.xe1		    :			160		   +160 	    152/s
T255.xe1		    :			  1		     +1 	      1/s
TPOK.xe1		    :			  1		     +1 	      1/s
TPKT.xe1		    :			  1		     +1 	      1/s
TUCA.xe1		    :			  1		     +1 	      1/s
TVLN.xe1		    :			  1		     +1 	      1/s
TBYT.xe1		    :			160		   +160 	    152/s
UC_PERQ_PKT(0).xe1	    :			  1		     +1 	      1/s
UC_PERQ_BYTE(0).xe1	    :			160		   +160 	    152/s

 Vpn :28688 

 VpnInfo : 
bcm_flow_vpn_config_t $$ = {
    unsigned int flags = 2 (0x2)
    int broadcast_group = 251658241 (0xf000001)
    int unknown_unicast_group = 251658241 (0xf000001)
    int unknown_multicast_group = 251658241 (0xf000001)
    bcm_vlan_protocol_packet_ctrl_t protocol_pkt = {
        int mmrp_action = 0 (0x0)
        int srp_action = 0 (0x0)
        int arp_reply_action = 0 (0x0)
        int arp_request_action = 0 (0x0)
        int nd_action = 0 (0x0)
        int dhcp_action = 0 (0x0)
        int igmp_report_leave_action = 2 (0x2)
        int igmp_query_action = 2 (0x2)
        int igmp_unknown_msg_action = 2 (0x2)
        int mld_report_done_action = 2 (0x2)
        int mld_query_action = 2 (0x2)
        int ip4_rsvd_mc_action = 2 (0x2)
        int ip6_rsvd_mc_action = 2 (0x2)
        int ip4_mc_router_adv_action = 2 (0x2)
        int ip6_mc_router_adv_action = 2 (0x2)
        int flood_action_according_to_pfm = 0 (0x0)
    }
    int match_port_class = 0 (0x0)
}

 Flow Ports 2
bcm_flow_port_t $$ = {
    int flow_port_id = -1342177279 (0xb0000001)
    unsigned int flags = 16 (0x10)
    unsigned int if_class = 0 (0x0)
    int network_group_id = 0 (0x0)
    unsigned short egress_service_tpid = 33024 (0x8100)
    int dscp_map_id = 0 (0x0)
    int vlan_pri_map_id = 0 (0x0)
    bcm_flow_port_split_horizon_drop_t drop_mode = bcmFlowPortSplitHorizonDropAll (0)
    int ingress_opaque_ctrl_id = 0 (0x0)
}
bcm_flow_port_t $$ = {
    int flow_port_id = -1342177278 (0xb0000002)
    unsigned int flags = 18 (0x12)
    unsigned int if_class = 0 (0x0)
    int network_group_id = 1 (0x1)
    unsigned short egress_service_tpid = 33024 (0x8100)
    int dscp_map_id = 0 (0x0)
    int vlan_pri_map_id = 0 (0x0)
    bcm_flow_port_split_horizon_drop_t drop_mode = bcmFlowPortSplitHorizonDropAll (0)
    int ingress_opaque_ctrl_id = 0 (0x0)
}
~~~ #3) verify(): ** end **

