/** \file dnx_data.c
 * 
 * DEVICE INTERFACE SOURCE- main interface file
 * DEVICE DATA might include any header file contains type that should stored in it
 * Therefore, headers outside device data module must not include this header file.
 * Instead source '.c' files will include this header
 * 
 * 
 * Device Data
 * SW component that maintains per device data
 * The data is static and won't be changed after device initialization.
 *     
 * Supported data types:
 *     - Define             - a 'uint32' number (a max value for all devices is maintained)
 *     - feature            - 1 bit per each feature (supported/not supported) - support soc properties 
 *     - table              - the data is accessed with keys and/or can maintain multiple values and/or set by soc property
 *     - numeric            - a 'uint32' number that support soc properties
 * 
 * User interface for DNX DATA component can be found in "dnx_data_if.h" and "dnx_data_if_#module#.h"
 * 
 * Adding the data is done via XMLs placed in "tools/autocoder/DeviceData/dnx/.." 
 * "How to" User Guide can be found in confluence. 
 *        
 *     
 * 
 * AUTO-GENERATED BY AUTOCODER!
 * DO NOT EDIT THIS FILE!
 */
/* *INDENT-OFF* */
/*
 * $Copyright: (c) 2016 Broadcom.
 * Broadcom Proprietary and Confidential. All rights reserved.$
 */
#ifdef BSL_LOG_MODULE
#error "BSL_LOG_MODULE redefined"
#endif
#define BSL_LOG_MODULE BSL_LS_SOCDNX_DATA
/**
 * \brief
 * Mark this file as device data internal file
 */
#define DNX_DATA_INTERNAL
/*
 * INCLUDE FILES:
 * {
 */
#include <soc/dnx/dnx_data/dnx_data.h>
#include <soc/dnx/dnx_data/dnx_data_internal.h>
#include <soc/dnx/dnx_data/dnx_data_port.h>
#include <soc/dnx/dnx_data/dnx_data_internal_port.h>
#include <soc/dnx/dnx_data/dnx_data_cmodel.h>
#include <soc/dnx/dnx_data/dnx_data_internal_cmodel.h>
#include <soc/dnx/dnx_data/dnx_data_crps.h>
#include <soc/dnx/dnx_data/dnx_data_internal_crps.h>
#include <soc/dnx/dnx_data/dnx_data_device.h>
#include <soc/dnx/dnx_data/dnx_data_internal_device.h>
#include <soc/dnx/dnx_data/dnx_data_fabric.h>
#include <soc/dnx/dnx_data/dnx_data_internal_fabric.h>
#include <soc/dnx/dnx_data/dnx_data_l2.h>
#include <soc/dnx/dnx_data/dnx_data_internal_l2.h>
#include <soc/dnx/dnx_data/dnx_data_l3.h>
#include <soc/dnx/dnx_data/dnx_data_internal_l3.h>
#include <soc/dnx/dnx_data/dnx_data_lif.h>
#include <soc/dnx/dnx_data/dnx_data_internal_lif.h>
#include <soc/dnx/dnx_data/dnx_data_module_testing.h>
#include <soc/dnx/dnx_data/dnx_data_internal_module_testing.h>
#include <soc/dnx/dnx_data/dnx_data_nif.h>
#include <soc/dnx/dnx_data/dnx_data_internal_nif.h>
#include <soc/dnx/dnx_data/dnx_data_snif.h>
#include <soc/dnx/dnx_data/dnx_data_internal_snif.h>
/*
 * }
 */

/*
 * Globals:
 * {
 */
/*
 * DNX_DATA object (main interface)
 * Shared between different DNX units
 * First DNX unit will initialize the structure
 * dnx_data_valid will be set to 1 after interface init
 */
dnx_data_if_port_t dnx_data_port;
dnx_data_if_cmodel_t dnx_data_cmodel;
dnx_data_if_crps_t dnx_data_crps;
dnx_data_if_device_t dnx_data_device;
dnx_data_if_fabric_t dnx_data_fabric;
dnx_data_if_l2_t dnx_data_l2;
dnx_data_if_l3_t dnx_data_l3;
dnx_data_if_lif_t dnx_data_lif;
dnx_data_if_module_testing_t dnx_data_module_testing;
dnx_data_if_nif_t dnx_data_nif;
dnx_data_if_snif_t dnx_data_snif;
static int dnx_data_valid;
/*
 * }
 */

/*
 * FUNCTIONS:
 * {
 */
shr_error_e
dnx_data_if_init(
    int unit)
{
    SHR_FUNC_INIT_VARS(unit);

    /* Init structured interface */
    if (dnx_data_valid != 0)
    {
        SHR_EXIT();
    }

    /*
     * port
     */
    /* general */
    /* features */
    dnx_data_port.general.feature_get = dnx_data_port_general_feature_get;

    /* Defines */
    dnx_data_port.general.fabric_port_base_get = dnx_data_port_general_fabric_port_base_get;

    /* Tables */
    dnx_data_port.general.ucode_port_get = dnx_data_port_general_ucode_port_get;

    /*
     * cmodel
     */
    /* tx */
    /* features */
    dnx_data_cmodel.tx.feature_get = dnx_data_cmodel_tx_feature_get;

    /* Defines */
    dnx_data_cmodel.tx.loopback_enable_get = dnx_data_cmodel_tx_loopback_enable_get;

    /* Tables */

    /*
     * crps
     */
    /* crps_engines */
    /* features */
    dnx_data_crps.crps_engines.feature_get = dnx_data_crps_crps_engines_feature_get;

    /* Defines */
    dnx_data_crps.crps_engines.nof_engines_get = dnx_data_crps_crps_engines_nof_engines_get;

    /* Tables */
    dnx_data_crps.crps_engines.engines_size_get = dnx_data_crps_crps_engines_engines_size_get;
    /* eviction */
    /* features */
    dnx_data_crps.eviction.feature_get = dnx_data_crps_eviction_feature_get;

    /* Defines */
    dnx_data_crps.eviction.nof_dma_fifo_per_core_get = dnx_data_crps_eviction_nof_dma_fifo_per_core_get;
    dnx_data_crps.eviction.counters_fifo_depth_get = dnx_data_crps_eviction_counters_fifo_depth_get;

    /* Tables */

    /*
     * device
     */
    /* general */
    /* features */
    dnx_data_device.general.feature_get = dnx_data_device_general_feature_get;

    /* Defines */
    dnx_data_device.general.nof_cores_get = dnx_data_device_general_nof_cores_get;

    /* Tables */

    /*
     * fabric
     */
    /* links */
    /* features */
    dnx_data_fabric.links.feature_get = dnx_data_fabric_links_feature_get;

    /* Defines */
    dnx_data_fabric.links.nof_links_get = dnx_data_fabric_links_nof_links_get;

    /* Tables */
    /* thresholds */
    /* features */
    dnx_data_fabric.thresholds.feature_get = dnx_data_fabric_thresholds_feature_get;

    /* Defines */
    dnx_data_fabric.thresholds.default_severity_get = dnx_data_fabric_thresholds_default_severity_get;
    dnx_data_fabric.thresholds.default_mode_get = dnx_data_fabric_thresholds_default_mode_get;

    /* Tables */
    dnx_data_fabric.thresholds.dch_default_get = dnx_data_fabric_thresholds_dch_default_get;
    /* cell */
    /* features */
    dnx_data_fabric.cell.feature_get = dnx_data_fabric_cell_feature_get;

    /* Defines */
    dnx_data_fabric.cell.nof_priorities_get = dnx_data_fabric_cell_nof_priorities_get;

    /* Tables */
    dnx_data_fabric.cell.pcp_get = dnx_data_fabric_cell_pcp_get;
    /* pipes */
    /* features */
    dnx_data_fabric.pipes.feature_get = dnx_data_fabric_pipes_feature_get;

    /* Defines */
    dnx_data_fabric.pipes.max_nof_pipes_get = dnx_data_fabric_pipes_max_nof_pipes_get;

    /* Tables */
    dnx_data_fabric.pipes.nof_pipes_get = dnx_data_fabric_pipes_nof_pipes_get;
    dnx_data_fabric.pipes.map_get = dnx_data_fabric_pipes_map_get;
    dnx_data_fabric.pipes.system_get = dnx_data_fabric_pipes_system_get;

    /*
     * l2
     */
    /* vsi */
    /* features */
    dnx_data_l2.vsi.feature_get = dnx_data_l2_vsi_feature_get;

    /* Defines */
    dnx_data_l2.vsi.nof_vsis_get = dnx_data_l2_vsi_nof_vsis_get;

    /* Tables */

    /*
     * l3
     */
    /* fec */
    /* features */
    dnx_data_l3.fec.feature_get = dnx_data_l3_fec_feature_get;

    /* Defines */
    dnx_data_l3.fec.max_nof_fec_get = dnx_data_l3_fec_max_nof_fec_get;
    dnx_data_l3.fec.max_fec_for_default_route_get = dnx_data_l3_fec_max_fec_for_default_route_get;

    /* Tables */
    /* source_address */
    /* features */
    dnx_data_l3.source_address.feature_get = dnx_data_l3_source_address_feature_get;

    /* Defines */
    dnx_data_l3.source_address.source_address_table_size_get = dnx_data_l3_source_address_source_address_table_size_get;

    /* Tables */

    /*
     * lif
     */
    /* global_lif */
    /* features */
    dnx_data_lif.global_lif.feature_get = dnx_data_lif_global_lif_feature_get;

    /* Defines */
    dnx_data_lif.global_lif.nof_global_in_lifs_get = dnx_data_lif_global_lif_nof_global_in_lifs_get;
    dnx_data_lif.global_lif.nof_global_out_lifs_get = dnx_data_lif_global_lif_nof_global_out_lifs_get;
    dnx_data_lif.global_lif.nof_glem_lines_get = dnx_data_lif_global_lif_nof_glem_lines_get;

    /* Tables */
    /* in_lif */
    /* features */
    dnx_data_lif.in_lif.feature_get = dnx_data_lif_in_lif_feature_get;

    /* Defines */
    dnx_data_lif.in_lif.nof_local_in_lifs_get = dnx_data_lif_in_lif_nof_local_in_lifs_get;

    /* Tables */
    /* out_lif */
    /* features */
    dnx_data_lif.out_lif.feature_get = dnx_data_lif_out_lif_feature_get;

    /* Defines */
    dnx_data_lif.out_lif.nof_local_out_lifs_get = dnx_data_lif_out_lif_nof_local_out_lifs_get;

    /* Tables */

    /*
     * module_testing
     */
    /* unsupported */
    /* features */
    dnx_data_module_testing.unsupported.feature_get = dnx_data_module_testing_unsupported_feature_get;

    /* Defines */
    dnx_data_module_testing.unsupported.supported_def_get = dnx_data_module_testing_unsupported_supported_def_get;
    dnx_data_module_testing.unsupported.unsupported_def_get = dnx_data_module_testing_unsupported_unsupported_def_get;

    /* Tables */
    dnx_data_module_testing.unsupported.supported_table_get = dnx_data_module_testing_unsupported_supported_table_get;
    dnx_data_module_testing.unsupported.unsupported_table_get = dnx_data_module_testing_unsupported_unsupported_table_get;
    /* types */
    /* features */
    dnx_data_module_testing.types.feature_get = dnx_data_module_testing_types_feature_get;

    /* Defines */

    /* Tables */
    dnx_data_module_testing.types.all_get = dnx_data_module_testing_types_all_get;
    /* property_methods */
    /* features */
    dnx_data_module_testing.property_methods.feature_get = dnx_data_module_testing_property_methods_feature_get;

    /* Defines */
    dnx_data_module_testing.property_methods.numeric_range_get = dnx_data_module_testing_property_methods_numeric_range_get;

    /* Tables */
    dnx_data_module_testing.property_methods.enable_get = dnx_data_module_testing_property_methods_enable_get;
    dnx_data_module_testing.property_methods.port_enable_get = dnx_data_module_testing_property_methods_port_enable_get;
    dnx_data_module_testing.property_methods.suffix_enable_get = dnx_data_module_testing_property_methods_suffix_enable_get;
    dnx_data_module_testing.property_methods.range_get = dnx_data_module_testing_property_methods_range_get;
    dnx_data_module_testing.property_methods.port_range_get = dnx_data_module_testing_property_methods_port_range_get;
    dnx_data_module_testing.property_methods.suffix_range_get = dnx_data_module_testing_property_methods_suffix_range_get;
    dnx_data_module_testing.property_methods.direct_map_get = dnx_data_module_testing_property_methods_direct_map_get;
    dnx_data_module_testing.property_methods.port_direct_map_get = dnx_data_module_testing_property_methods_port_direct_map_get;
    dnx_data_module_testing.property_methods.suffix_direct_map_get = dnx_data_module_testing_property_methods_suffix_direct_map_get;
    dnx_data_module_testing.property_methods.custom_get = dnx_data_module_testing_property_methods_custom_get;
    /* dbal */
    /* features */
    dnx_data_module_testing.dbal.feature_get = dnx_data_module_testing_dbal_feature_get;

    /* Defines */
    dnx_data_module_testing.dbal.vrf_field_size_get = dnx_data_module_testing_dbal_vrf_field_size_get;

    /* Tables */
    dnx_data_module_testing.dbal.all_get = dnx_data_module_testing_dbal_all_get;

    /*
     * nif
     */

    /*
     * snif
     */
    /* ingress */
    /* features */
    dnx_data_snif.ingress.feature_get = dnx_data_snif_ingress_feature_get;

    /* Defines */
    dnx_data_snif.ingress.nof_profiles_get = dnx_data_snif_ingress_nof_profiles_get;

    /* Tables */

    /*
     * Set valid bit
     */
    dnx_data_valid = 1;

exit:
    SHR_FUNC_EXIT;
}

shr_error_e
dnx_data_if_deinit(
    int unit)
{
    SHR_FUNC_INIT_VARS(unit);

    /* Do nothing */
    /* no resources to free */
    /* do not memset the structure since it shared with other units */

    SHR_FUNC_EXIT;
}

shr_error_e
dnx_data_init(
    int unit)
{
    SHR_FUNC_INIT_VARS(unit);

    /* Data Struct Init */
    _dnx_data[unit].name = "dnx_data";
    _dnx_data[unit].nof_modules = dnx_data_module_nof;
    _dnx_data[unit].modules = sal_alloc(sizeof(dnx_data_module_t) * _dnx_data[unit].nof_modules, "_dnx_data modules");
    if (_dnx_data[unit].modules == NULL)
    {
        SHR_ERR_EXIT(_SHR_E_MEMORY, "failed to allocate dnx_data modules\n");
    }
    sal_memset(_dnx_data[unit].modules, 0, sizeof(dnx_data_module_t) * _dnx_data[unit].nof_modules);

    /*
     * Interface Init
     */
    SHR_IF_ERR_EXIT(dnx_data_if_init(unit));
    /*
     * Set state to init done - device data set
     */
    SHR_IF_ERR_EXIT(dnx_data_mgmt_state_set(unit, DNX_DATA_STATE_F_INIT_DONE));
    /*
     * Per Module Data Init
     */
    SHR_IF_ERR_EXIT(dnx_data_port_init(unit, &_dnx_data[unit].modules[dnx_data_module_port]));
    SHR_IF_ERR_EXIT(dnx_data_cmodel_init(unit, &_dnx_data[unit].modules[dnx_data_module_cmodel]));
    SHR_IF_ERR_EXIT(dnx_data_crps_init(unit, &_dnx_data[unit].modules[dnx_data_module_crps]));
    SHR_IF_ERR_EXIT(dnx_data_device_init(unit, &_dnx_data[unit].modules[dnx_data_module_device]));
    SHR_IF_ERR_EXIT(dnx_data_fabric_init(unit, &_dnx_data[unit].modules[dnx_data_module_fabric]));
    SHR_IF_ERR_EXIT(dnx_data_l2_init(unit, &_dnx_data[unit].modules[dnx_data_module_l2]));
    SHR_IF_ERR_EXIT(dnx_data_l3_init(unit, &_dnx_data[unit].modules[dnx_data_module_l3]));
    SHR_IF_ERR_EXIT(dnx_data_lif_init(unit, &_dnx_data[unit].modules[dnx_data_module_lif]));
    SHR_IF_ERR_EXIT(dnx_data_module_testing_init(unit, &_dnx_data[unit].modules[dnx_data_module_module_testing]));
    SHR_IF_ERR_EXIT(dnx_data_nif_init(unit, &_dnx_data[unit].modules[dnx_data_module_nif]));
    SHR_IF_ERR_EXIT(dnx_data_snif_init(unit, &_dnx_data[unit].modules[dnx_data_module_snif]));

    SHR_IF_ERR_EXIT(dnx_data_mgmt_values_set(unit));
    /*
     * Set state to init done - device data set
     */
    SHR_IF_ERR_EXIT(dnx_data_mgmt_state_set(unit, DNX_DATA_STATE_F_DEV_DATA_DONE));

exit:
    SHR_FUNC_EXIT;
}

shr_error_e
dnx_data_deinit(
    int unit)
{
    SHR_FUNC_INIT_VARS(unit);

    /*
     * Interface Deinit
     */
    SHR_IF_ERR_CONT(dnx_data_if_deinit(unit));

    /*
     * Interface (memory allocation) deinit
     */
    SHR_IF_ERR_CONT(dnx_data_mgmt_deinit(unit, &_dnx_data[unit]));

    SHR_FUNC_EXIT;
}

/*
 * }
 */
/* *INDENT-ON* */
