
/*
 *         
 * 
 * 
 * This license is set out in https://raw.githubusercontent.com/Broadcom-Network-Switching-Software/OpenBCM/master/Legal/LICENSE file.
 * 
 * Copyright 2007-2022 Broadcom Inc. All rights reserved.
 *     
 * DO NOT EDIT THIS FILE!
 *
 */

#ifndef _IMB_OTNU_PHY_H__H_
#define _IMB_OTNU_PHY_H__H_

#include <soc/portmod/portmod.h>
#include <bcm/port.h>
#include <bcm/cosq.h>
#include <bcm_int/dnx/port/imb/imb_diag.h>
#include <bcm_int/dnx/cosq/ingress/cosq_ingress_port.h>
#include <soc/dnxc/dnxc_port.h>
/*initialize an IMB.*/
int imb_otnu_phy_init(
    int unit,
    const imb_create_info_t * imb_info,
    imb_specific_create_info_t * imb_specific_info);

/*De-initialize an existing IMB.*/
int imb_otnu_phy_deinit(
    int unit,
    const imb_create_info_t * imb_info,
    imb_specific_create_info_t * imb_specific_info);

/*Add new IMB (Interface Management Block) port*/
int imb_otnu_phy_port_attach(
    int unit,
    bcm_port_t port,
    uint32 flags);

/*Remove an existing IMB (Interface Management Block) port*/
int imb_otnu_phy_port_detach(
    int unit,
    bcm_port_t port);

/*Enable / disable a port*/
int imb_otnu_phy_port_enable_set(
    int unit,
    bcm_port_t port,
    uint32 flags,
    int enable);
int imb_otnu_phy_port_enable_get(
    int unit,
    bcm_port_t port,
    int *enable);

/*Enable / disable loopback on a port*/
int imb_otnu_phy_port_loopback_set(
    int unit,
    bcm_port_t port,
    int loopback);
int imb_otnu_phy_port_loopback_get(
    int unit,
    bcm_port_t port,
    int *loopback);

/*Get port link state*/
int imb_otnu_phy_port_link_state_get(
    int unit,
    bcm_port_t port,
    int clear_status,
    bcm_port_link_state_t * link_state);

/*Set Mac link according to Phy status*/
int imb_otnu_phy_port_link_up_mac_update(
    int unit,
    bcm_port_t port,
    int link);

/*Get link status*/
int imb_otnu_phy_port_link_get(
    int unit,
    bcm_port_t port,
    int flags,
    int *link);

/*Get port's default resource configurations*/
int imb_otnu_phy_port_resource_default_get(
    int unit,
    bcm_port_t port,
    uint32 flags,
    bcm_port_resource_t * resource);

/*Validate the FEC+SPEED combinations*/
int imb_otnu_phy_port_fec_speed_validate(
    int unit,
    bcm_port_t port,
    bcm_port_phy_fec_t fec_type,
    int speed);

/*Set/Get the logical lane mapping for logical ports*/
int imb_otnu_phy_port_lane_map_set(
    int unit,
    bcm_port_t port,
    uint32 flags,
    const int *lanes,
    int nof_lanes);
int imb_otnu_phy_port_lane_map_get(
    int unit,
    bcm_port_t port,
    uint32 flags,
    int nof_max_lanes,
    int *lanes,
    int *nof_actual_lanes);

/*Port FLR link configuration set\get*/
int imb_otnu_phy_port_flr_link_config_set(
    int unit,
    bcm_port_t port,
    const bcm_port_flr_link_config_t * config);
int imb_otnu_phy_port_flr_link_config_get(
    int unit,
    bcm_port_t port,
    bcm_port_flr_link_config_t * config);

#endif /*_IMB_OTNU_PHY_H_*/
