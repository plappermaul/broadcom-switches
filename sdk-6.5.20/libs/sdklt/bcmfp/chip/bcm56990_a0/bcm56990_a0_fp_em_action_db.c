/*! \file bcm56990_a0_fp_em_action_db.c
 *
 * EM action configuration DB initialization function for Tomahawk-4(56990_A0).
 */
/*
 * This license is set out in https://raw.githubusercontent.com/Broadcom-Network-Switching-Software/OpenBCM/master/Legal/LICENSE file.
 * 
 * Copyright 2007-2020 Broadcom Inc. All rights reserved.
 */

#include <shr/shr_error.h>
#include <shr/shr_debug.h>
#include <bcmfp/bcmfp_internal.h>
#include <bcmfp/chip/bcm56990_a0_fp.h>
#include <bcmltd/chip/bcmltd_id.h>

#define BSL_LOG_MODULE BSL_LS_BCMFP_DEV

/* Action set's supported in 56990_A0 in the
 * order they are present in reg file
 * EXACT_MATCH_ACTION_PROFILE table.
 * Below is the list of action sets and
 * their corresponding sizes in bits.
 *
 *    METER_SET_ENABLE = 0, size = 16,
 *
 *    CHANGE_CPU_COS_SET_ENABLE = 1, size = 8,
 *
 *    COPY_TO_CPU_SET_ENABLE = 2, size = 17,
 *
 *    COUNTER_SET_ENABLE = 3, size = 25,
 *
 *    CUT_THRU_OVERRIDE_SET_ENABLE = 4, size = 1,
 *
 *    DELAYED_DROP_SET_ENABLE = 5, size = 8,
 *
 *    DELAYED_REDIRECT_SET_ENABLE = 6, size =17,
 *
 *    DLB_ALTERNATE_PATH_CONTROL_SET_ENABLE = 7, size = 10,
 *
 *    DLB_ECMP_MONITOR_SET_ENABLE = 8, size = 2,
 *
 *    DLB_ECMP_SET_ENABLE = 9, size = 2,
 *
 *    DROP_SET_ENABLE = 10, size = 6,
 *
 *    ELEPHANT_TRAP_SET_ENABLE = 11, size = 6,
 *
 *    EXACT_MATCH_REDIRECT_SET_ENABLE = 12, size = 25,
 *
 *    GREEN_TO_PID_SET_ENABLE = 13, size = 1,
 *
 *    INBAND_TELEMETRY_SET_ENABLE = 14, size = 32,
 *
 *    INSTRUMENTATION_SET_ENABLE = 15, size = 1,
 *
 *    L3SW_CHANGE_L2_SET_ENABLE = 16, size = 23,
 *
 *    LB_CONTROLS_SET_ENABLE = 17, size = 2,
 *
 *    MIRROR_OVERRIDE_SET_ENABLE = 18, size = 1,
 *
 *    MIRROR_SET_ENABLE = 19, size = 19,
 *
 *    PROTECTION_SWITCHING_SET_ENABLE = 20, size = 1,
 *
 *    SFLOW_SET_ENABLE = 21, size = 7,
 *
 *    TIMESTAMP_SET_ENABLE = 22, size = 4,
 *
 *    TTL_OVERRIDE_SET_ENABLE = 23, size = 1,
 *
 *    IFP_MULTIPLE_MIRROR_DESTINATION_SET_ENABLE = 24, size = 7,
 *
 *    MIRROR_ON_DROP_ENABLE = 25, size = 5,
 *
 *    DCN_ACTION_SET_ENABLE = 26, size = 4,
 *
 *    CONTAINER_COUNT = 27
 *
 *    CONTAINER_BITMAP = 0 to 26
 */

static uint16_t bcm56990_a0_em_pdd_container_size[] = {
    16, /* IFP_METER_SET */
    8,  /* IFP_CHANGE_CPU_COS_SET */
    17, /* IFP_COPY_TO_CPU_SET */
    25, /* IFP_COUNTER_SET */
    1,  /* IFP_CUT_THRU_OVERRIDE_SET */
    8,  /* IFP_DELAYED_DROP_SET */
    17, /* IFP_DELAYED_REDIRECT_SET */
    10, /* IFP_DLB_ALTERNATE_PATH_CONTROL_SET */
    2,  /* IFP_DLB_ECMP_MONITOR_SET */
    2,  /* IFP_DLB_ECMP_SET */
    6,  /* IFP_DROP_SET */
    6,  /* IFP_ELEPHANT_TRAP_SET */
    25, /* EXACT_MATCH_REDIRECT_SET */
    1,  /* IFP_GREEN_TO_PID_SET */
    32, /* IFP_INBAND_TELEMETRY_SET */
    1,  /* IFP_INSTRUMENTATION_SET */
    23, /* IFP_L3SW_CHANGE_L2_SET */
    2,  /* IFP_LB_CONTROLS_SET */
    1,  /* IFP_MIRROR_OVERRIDE_SET */
    19, /* IFP_MIRROR_SET */
    1,  /* IFP_PROTECTION_SWITCHING_SET */
    7,  /* IFP_SFLOW_SET */
    4,  /* IFP_TIMESTAMP_SET */
    1,  /* IFP_TTL_OVERRIDE_SET */
    7,  /* IFP_MULTIPLE_MIRROR_DESTINATION_SET */
    5,  /* IFP_MIRROR_ON_DROP_SET */
    2   /* IFP_DCN_ACTION_SET */
};

int
bcmfp_bcm56990_a0_em_action_cfg_db_init(int unit,
                                        bcmfp_stage_t *stage)
{
    uint32_t offset = 0;                  /* General variable to carry offset. */
    uint32_t flags = 0;
    uint32_t fid = 0;

    BCMFP_ACTION_CFG_DECL;

    SHR_FUNC_ENTER(unit);

    SHR_NULL_CHECK(stage, SHR_E_PARAM);

    if (BCMFP_STAGE_FLAGS_TEST(stage, BCMFP_STAGE_KEY_TYPE_PRESEL)) {
        SHR_IF_ERR_EXIT(
            bcmfp_bcm56990_a0_em_presel_action_cfg_db_init(unit, stage));
    }

    /* QOS PROFILE ACTIONS */
    flags = flags | (BCMFP_ACTIONS_IN_FLAT_POLICY);

    /* FP_PROFILE_SET_1(56b) */

    /* BCMFP_ACTION_NEW_UNTAG_PKT_PRIORITY */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 18, 4, -1);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 0, offset + 0, 1, -1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_NEW_UNTAG_PKT_PRIORITYf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_R_NEW_COLOR */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 35, 2, -1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_R_NEW_COLORf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_Y_NEW_COLOR */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 52, 2, -1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_Y_NEW_COLORf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_G_NEW_COLOR */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 14, 2, -1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_G_NEW_COLORf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_R_FP_ING_COS_Q_INT_PRI_MAP_ID */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 27, 2, -1);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 0, offset + 22, 4, 2);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_R_FP_ING_COS_Q_INT_PRI_MAP_IDf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_R_NEW_COS */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 27, 8, -1);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 0, offset + 22, 4, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_R_NEW_COSf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_R_NEW_INTPRI */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 27, 8, -1);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 0, offset + 22, 4, 5);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_R_NEW_INTPRIf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_R_INTPRI_TO_TOS */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 22, 4, 6);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_R_INTPRI_TO_TOSf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_R_INTPRI_UPDATES_CANCEL */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 22, 4, 7);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_R_INTPRI_UPDATES_CANCELf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_R_NEW_UC_COS */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 27, 4, -1);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 0, offset + 22, 4, 8);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_R_NEW_UC_COSf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_R_NEW_MC_COS */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 31, 4, -1);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 0, offset + 22, 4, 9);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_R_NEW_MC_COSf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_Y_FP_ING_COS_Q_INT_PRI_MAP_ID */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 44, 2, -1);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 0, offset + 39, 4, 2);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_Y_FP_ING_COS_Q_INT_PRI_MAP_IDf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_Y_NEW_COS */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 44, 8, -1);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 0, offset + 39, 4, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_Y_NEW_COSf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_Y_NEW_INTPRI */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 44, 8, -1);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 0, offset + 39, 4, 5);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_Y_NEW_INTPRIf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_Y_INTPRI_TO_TOS */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 39, 4, 6);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_Y_INTPRI_TO_TOSf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_Y_INTPRI_UPDATES_CANCEL */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 39, 4, 7);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_Y_INTPRI_UPDATES_CANCELf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_Y_NEW_UC_COS */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 44, 4, -1);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 0, offset + 39, 4, 8);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_Y_NEW_UC_COSf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_Y_NEW_MC_COS */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 48, 4, -1);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 0, offset + 39, 4, 9);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_Y_NEW_MC_COSf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_G_FP_ING_COS_Q_INT_PRI_MAP_ID */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 6, 2, -1);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 0, offset + 1, 4, 2);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_G_FP_ING_COS_Q_INT_PRI_MAP_IDf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_G_NEW_COS */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 6, 8, -1);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 0, offset + 1, 4, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_G_NEW_COSf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_G_NEW_INTPRI */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 6, 8, -1);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 0, offset + 1, 4, 5);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_G_NEW_INTPRIf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_G_INTPRI_TO_TOS */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 1, 4, 6);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_G_INTPRI_TO_TOSf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_G_INTPRI_UPDATES_CANCEL */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 1, 4, 7);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_G_INTPRI_UPDATES_CANCELf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_G_NEW_UC_COS */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 6, 4, -1);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 0, offset + 1, 4, 8);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_G_NEW_UC_COSf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_G_NEW_MC_COS */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 10, 4, -1);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 0, offset + 1, 4, 9);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_Y_NEW_MC_COSf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_G_NEW_INTCN */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 16, 2, -1);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 0, offset + 5, 1, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_G_NEW_INTCNf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_Y_NEW_INTCN */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 54, 2, -1);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 0, offset + 43, 1, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_Y_NEW_INTCNf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_R_NEW_INTCN */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 37, 2, -1);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 0, offset + 26, 1, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_R_NEW_INTCNf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* FP_PROFILE_SET_2(52b) */
    offset = 56;

    /* BCMFP_ACTION_R_NEW_ECN */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 30, 2, -1);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 0, offset + 20, 1, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_R_NEW_ECNf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_Y_NEW_ECN */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 47, 2, -1);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 0, offset + 37, 1, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_Y_NEW_ECNf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_G_NEW_ECN */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 13, 2, -1);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 0, offset + 3, 1, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_G_NEW_ECNf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_R_PRESERVE_DOT1P */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 21, 3, 3);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_R_PRESERVE_DOT1Pf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_R_NEW_OUTER_DOT1P */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 32, 3, -1);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 0, offset + 21, 3, 5);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_R_NEW_OUTER_DOT1Pf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_R_OUTER_DOT1P_TO_TOS */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 21, 3, 6);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_R_OUTER_DOT1P_TO_TOSf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_R_DOT1P_UPDATES_CANCEL */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 21, 3, 7);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_R_DOT1P_UPDATES_CANCELf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_Y_PRESERVE_DOT1P */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 38, 3, 3);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_Y_PRESERVE_DOT1Pf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_Y_NEW_OUTER_DOT1P */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 49, 3, -1);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 0, offset + 38, 3, 5);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_Y_NEW_OUTER_DOT1Pf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_Y_OUTER_DOT1P_TO_TOS */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 38, 3, 6);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_Y_OUTER_DOT1P_TO_TOSf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_Y_DOT1P_UPDATES_CANCEL */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 38, 3, 7);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_Y_DOT1P_UPDATES_CANCELf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_G_PRESERVE_DOT1P */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 4, 3, 3);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_G_PRESERVE_DOT1Pf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_G_NEW_OUTER_DOT1P */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 15, 3, -1);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 0, offset + 4, 3, 5);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_G_NEW_OUTER_DOT1Pf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_G_OUTER_DOT1P_TO_TOS */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 4, 3, 6);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_G_OUTER_DOT1P_TO_TOSf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_G_DOT1P_UPDATES_CANCEL */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 4, 3, 7);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_G_DOT1P_UPDATES_CANCELf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_R_NEW_DSCP */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 24, 6, -1);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 0, offset + 18, 2, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_R_NEW_DSCPf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_R_DSCP_UPDATES_CANCEL */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 18, 2, 2);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_R_DSCP_UPDATES_CANCELf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_R_PRESERVE_DSCP */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 18, 2, 3);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_R_PRESERVE_DSCPf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_Y_NEW_DSCP */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 41, 6, -1);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 0, offset + 35, 2, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_Y_NEW_DSCPf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_Y_DSCP_UPDATES_CANCEL */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 35, 2, 2);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_Y_DSCP_UPDATES_CANCELf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION__PRESERVE_DSCP */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 35, 2, 3);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_Y_PRESERVE_DSCPf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_G_NEW_DSCP */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 7, 6, -1);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 0, offset + 0, 2, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_G_NEW_DSCPf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_G_DSCP_UPDATES_CANCEL */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 0, 2, 2);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_G_DSCP_UPDATES_CANCELf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_G_PRESERVE_DSCP */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 0, 2, 3);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_G_PRESERVE_DSCPf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_G_NEW_TOS */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 7, 6, -1);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 0, offset + 0, 3, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_G_NEW_TOSf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_G_TOS_TO_PRE_FP_ING_OUTER_DOT1P */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, offset + 0, 3, 2);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_G_TOS_TO_PRE_FP_ING_OUTER_DOT1Pf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    flags = flags & ~(BCMFP_ACTIONS_IN_FLAT_POLICY);

    /* FP_MIRROR_SET(12b) */

    /* BCMFP_ACTION_MIRROR_INST_0 */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 19, 7, 3, -1);
    fid = FP_EM_POLICY_TEMPLATEt_FIELD_COUNT;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_MIRROR_INST_1 */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 19, 10, 3, -1);
    fid = FP_EM_POLICY_TEMPLATEt_FIELD_COUNT + 1;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_MIRROR_INST_2 */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 19, 13, 3, -1);
    fid = FP_EM_POLICY_TEMPLATEt_FIELD_COUNT + 2;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_MIRROR_INST_3 */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 19, 16, 3, -1);
    fid = FP_EM_POLICY_TEMPLATEt_FIELD_COUNT + 3;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* ACTION_MIRROR_INSTANCE_ENABLE[0] */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 19, 0, 1, -1);
    fid = FP_EM_POLICY_TEMPLATEt_FIELD_COUNT + 4;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* ACTION_MIRROR_INSTANCE_ENABLE[1] */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 19, 1, 1, -1);
    fid = FP_EM_POLICY_TEMPLATEt_FIELD_COUNT + 5;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* ACTION_MIRROR_INSTANCE_ENABLE[2] */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 19, 2, 1, -1);
    fid = FP_EM_POLICY_TEMPLATEt_FIELD_COUNT + 6;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* ACTION_MIRROR_INSTANCE_ENABLE[4] */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 19, 3, 1, -1);
    fid = FP_EM_POLICY_TEMPLATEt_FIELD_COUNT + 7;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_MIRROR_EGR_ZERO_PAYLOAD_PROFILE_ID */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 19, 4, 3, -1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_MIRROR_EGR_ZERO_PAYLOAD_PROFILE_IDf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* FP_LB_CONTROLS_SET(2b) */

    /* BCMFP_ACTION_TRUNK_SPRAY_HASH_CANCEL */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 17, 1, 1, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_TRUNK_SPRAY_HASH_CANCELf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_ECMP_SPRAY_HASH_CANCEL */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 17, 0, 1, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_ECMP_SPRAY_HASH_CANCELf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* IFP_COPY_TO_CPU_SET(17b) */

    /* BCMFP_ACTION_R_COPY_TO_CPU */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 2, 11, 3, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_R_COPY_TO_CPUf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_MATCH_ID */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 2, 3, 8, -1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_MATCH_IDf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_R_COPY_TO_CPU_CANCEL */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 2, 11, 3, 2);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_R_COPY_TO_CPU_CANCELf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_R_SWITCH_TO_CPU_CANCEL */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 2, 11, 3, 3);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_R_SWITCH_TO_CPU_CANCELf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_R_SWITCH_TO_CPU_REINSATE */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 2, 11, 3, 4);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_R_SWITCH_TO_CPU_REINSATEf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_R_COPY_AND_SWITCH_TO_CPU_CANCEL */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 2, 11, 3, 6);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_R_COPY_AND_SWITCH_TO_CPU_CANCELf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_R_COPY_TO_CPU_WITH_TIMESTAMP */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 2, 11, 3, 5);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_R_COPY_TO_CPU_WITH_TIMESTAMPf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_Y_COPY_TO_CPU */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 2, 14, 3, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_Y_COPY_TO_CPUf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_Y_COPY_TO_CPU_CANCEL */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 2, 14, 3, 2);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_Y_COPY_TO_CPU_CANCELf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_Y_SWITCH_TO_CPU_CANCEL */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 2, 14, 3, 3);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_Y_SWITCH_TO_CPU_CANCELf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_Y_SWITCH_TO_CPU_REINSATE */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 2, 14, 3, 4);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_Y_SWITCH_TO_CPU_REINSATEf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_Y_COPY_AND_SWITCH_TO_CPU_CANCEL */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 2, 14, 3, 6);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_Y_COPY_AND_SWITCH_TO_CPU_CANCELf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);


    /* BCMFP_ACTION_Y_COPY_TO_CPU_WITH_TIMESTAMP */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 2, 14, 3, 5);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_Y_COPY_TO_CPU_WITH_TIMESTAMPf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_G_COPY_TO_CPU */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 2, 0, 3, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_G_COPY_TO_CPUf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_G_COPY_TO_CPU_CANCEL */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 2, 0, 3, 2);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_G_COPY_TO_CPU_CANCELf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_G_SWITCH_TO_CPU_CANCEL */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 2, 0, 3, 3);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_G_SWITCH_TO_CPU_CANCELf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_G_SWITCH_TO_CPU_REINSATE */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 2, 0, 3, 4);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_G_SWITCH_TO_CPU_REINSATEf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

     /* BCMFP_ACTION_G_COPY_AND_SWITCH_TO_CPU_CANCEL */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 2, 0, 3, 6);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_G_COPY_AND_SWITCH_TO_CPU_CANCELf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);


    /* BCMFP_ACTION_G_COPY_TO_CPU_WITH_TIMESTAMP */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 2, 0, 3, 5);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_G_COPY_TO_CPU_WITH_TIMESTAMPf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* FP_CUT_THRU_OVERRIDE_SET(1b) */

    /* BCMFP_ACTION_DO_NOT_CUT_THROUGH */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 4, 0, 1, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_DO_NOT_CUT_THROUGHf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* DLB_ALTERNATE_PATH_CONTROL_SET(10b) */

    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 7, 0, 1, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_DGMf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 7, 1, 3, -1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_DGM_BIASf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 7, 4, 3, -1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_DGM_COSTf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 7, 7, 3, -1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_DGM_THRESHOLDf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* DLB_ECMP_MONITOR_SET(2b) */

    /* BCMFP_ACTION_DLB_ECMP_MONITOR_DISABLE */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 8, 0, 1, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_DLB_ECMP_MONITOR_DISABLEf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_DLB_ECMP_MONITOR_ENABLE */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 8, 1, 1, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_DLB_ECMP_MONITOR_ENABLEf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* DLB_ECMP_SET(2b) */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 9, 0, 1, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_DYNAMIC_ECMP_CANCELf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 9, 1, 1, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_DYNAMIC_ECMP_ENABLEf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* FP_TTL_SET(1b) */

    /* BCMFP_ACTION_DO_NOT_CHANGE_TTL */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 23, 0, 1, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_DO_NOT_CHANGE_TTLf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* FP_L3SW_CHANGE_L2_SET(33b) */

    /* BCMFP_ACTION_CHANGE_PKT_L2_FIELDS */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 16, 0, 16, -1);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 16, 19, 4, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_CHANGE_PKT_L2_FIELDSf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_CHANGE_PKT_L2_FIELDS_CANCEL */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 16, 19, 4, 2);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_CHANGE_PKT_L2_FIELDS_CANCELf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_SWITCH_TO_L3UC */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 16, 0, 16, -1);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 16, 17, 1, 0);
    BCMFP_ACTION_CFG_OFFSET_ADD(2, 16, 19, 4, 6);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_SWITCH_TO_L3UCf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_SWITCH_TO_ECMP */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 16, 0, 12, -1);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 16, 17, 1, 1);
    BCMFP_ACTION_CFG_OFFSET_ADD(2, 16, 19, 4, 6);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_SWITCH_TO_ECMPf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_ECMP_HASH */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 16, 12, 3, -1);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 16, 19, 4, 6);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_ECMP_HASHf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_L3_SWITCH_CANCEL */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 16, 19, 4, 7);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_L3_SWITCH_CANCELf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_ING_CLASS_ID_SELECT */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 16, 0, 4, -1);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 16, 19, 4, 8);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_ING_CLASS_ID_SELECTf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_FP_ING_CLASS_ID */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 16, 4, 12, -1);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 16, 19, 4, 8);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_FP_ING_CLASS_IDf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_NEW_BFD_SEESSION_IDX */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 16, 0, 12, -1);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 16, 19, 4, 9);

    /* FP_CHANGE_CPU_COS_SET(8b) */

    /* BCMFP_ACTION_NEW_CPU_COS */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 1, 2, 6, -1);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 1, 0, 2, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_NEW_CPU_COSf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_NEW_SERVICE_POOL_ID */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 1, 4, 2, -1);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 1, 6, 2, 2);
    BCMFP_ACTION_CFG_OFFSET_ADD(2, 1, 0, 2, 2);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_NEW_SERVICE_POOL_IDf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_NEW_SERVICE_POOL_PRECEDENCE */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 1, 2, 2, -1);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 1, 6, 2, 1);
    BCMFP_ACTION_CFG_OFFSET_ADD(2, 1, 0, 2, 2);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_NEW_SERVICE_POOL_PRECEDENCEf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* FP_DROP_SET(6b) */

    /* BCMFP_ACTION_R_DROP */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 10, 2, 2, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_R_DROPf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_R_DROP_CANCEL */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 10, 2, 2, 2);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_R_DROP_CANCELf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_Y_DROP */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 10, 4, 2, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_Y_DROPf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_Y_DROP_CANCEL */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 10, 4, 2, 2);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_Y_DROP_CANCELf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_G_DROP */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 10, 0, 2, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_G_DROPf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_G_DROP_CANCEL */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 10, 0, 2, 2);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_G_DROP_CANCELf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* ELEPHANT_TRAP_SET (6b)*/

    /* BCMFP_ACTION_ETRAP_COLOR_DISABLE */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 11, 0, 1, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_ETRAP_COLOR_DISABLEf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_ETRAP_COLOR_ENABLE */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 11, 1, 1, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_ETRAP_COLOR_ENABLEf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_ETRAP_LOOKUP_DISABLE */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 11, 2, 1, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_ETRAP_LOOKUP_DISABLEf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_ETRAP_LOOKUP_ENABLE */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 11, 3, 1, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_ETRAP_LOOKUP_ENABLEf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_ETRAP_QUEUE_DISABLE */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 11, 4, 1, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_ETRAP_QUEUE_DISABLEf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_ETRAP_QUEUE_ENABLE */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 11, 5, 1, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_ETRAP_QUEUE_ENABLEf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* IFP_GREEN_TO_PID_SET (1b)*/

    /* BCMFP_ACTION_GREEN_TO_PID */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 13, 0, 1, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_GREEN_TO_PIDf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* INBAND_TELEMETRY_SET (2b)*/

    /* BCMFP_ACTION_INBAND_TELEMETRY_ENCAP_DISABLE */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 14, 0, 1, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_INBAND_TELEMETRY_ENCAP_DISABLEf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_INBAND_TELEMETRY_ENCAP_ENABLE */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 14, 1, 1, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_INBAND_TELEMETRY_ENCAP_ENABLEf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 14, 2, 4, -1);
    fid = FP_ING_POLICY_TEMPLATEt_ACTION_INBAND_TELEMETRY_PROFILE_IDXf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 14, 6, 1, 1);
    fid = FP_ING_POLICY_TEMPLATEt_ACTION_INBAND_TELEMETRY_SAMPLE_ENABLEf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 14, 7, 13, -1);
    fid = FP_ING_POLICY_TEMPLATEt_ACTION_INBAND_TELEMETRY_FLOW_CLASS_IDf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 14, 20, 4, -1);
    fid = FP_ING_POLICY_TEMPLATEt_ACTION_INBAND_TELEMETRY_TERM_ACTION_PROFILE_IDXf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 14, 24, 2, -1);
    fid = FP_ING_POLICY_TEMPLATEt_ACTION_INBAND_TELEMETRY_EGR_LOOPBACK_PROFILE_IDXf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 14, 26, 3, -1);
    fid = FP_ING_POLICY_TEMPLATEt_ACTION_INBAND_TELEMETRY_MMU_STAT_REQ_0f;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 14, 29, 3, -1);
    fid = FP_ING_POLICY_TEMPLATEt_ACTION_INBAND_TELEMETRY_MMU_STAT_REQ_1f;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* INSTRUMENTATION_SET_ENABLE (1b)*/

    /* BCMFP_ACTION_VISIBILITY_ENABLE */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 15, 0, 1, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_VISIBILITY_ENABLEf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* FP_MIRROR_OVERRIDE_SET(1b) */

    /* BCMFP_ACTION_MIRROR_OVERRIDE */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 18, 0, 1, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_MIRROR_OVERRIDEf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* IFP_PROTECTION_SWITCHING_SET(1b) */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 20, 0, 1, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_PROTECTION_SWITCHING_DROP_OVERRIDEf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* FP_SFLOW_SET(7b) */

    /* BCMFP_ACTION_SFLOW_ENABLE */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 21, 0, 1, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_SFLOW_ENABLEf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_SFLOW_SAMPLE_ID */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 21, 1, 6, -1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_MIRROR_ING_FLEX_SFLOW_IDf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* IFP_MULTIPLE_MIRROR_DESTINATION_SET_ENABLE(7b) */

    /* BCMFP_ACTION_MIRROR_FLOW_CLASS */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 24, 1, 6, -1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_MIRROR_FLOW_CLASSf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_MIRROR_FLOW_CLASS_ENABLE */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 24, 0, 1, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_MIRROR_FLOW_CLASS_ENABLEf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* IFP_MIRROR_ON_DROP_SET_ENABLE(5b) */
    /* BCMFP_ACTION_MIRROR_ON_DROP_TM_ENABLE */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 25, 0, 1, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_MIRROR_ON_DROP_TM_ENABLEf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_MIRROR_ON_DROP_TM_DISABLE */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 25, 1, 1, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_MIRROR_ON_DROP_TM_DISABLEf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_MIRROR_ON_DROP_TM_PROFILE_ID */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 25, 2, 3, -1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_MIRROR_ON_DROP_TM_PROFILE_IDf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* IFP_DCN_ACTION_SET(2b) */
    /* BCMFP_ACTION_DCN_ENABLE */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 26, 0, 2, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_DCN_ENABLEf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_DCN_DISABLE */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 26, 0, 2, 2);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_DCN_DISABLEf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* IFP_TIMESTAMP_SET(4b) */

    /* BCMFP_ACTION_ING_TIMESTAMP_INSERT */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0,22 , 0, 2, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_ING_TIMESTAMP_INSERTf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_ING_TIMESTAMP_INSERT_CANCEL */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0,22 , 0, 2, 2);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_ING_TIMESTAMP_INSERT_CANCELf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_EGR_TIMESTAMP_INSERT */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0,22 , 2, 2, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_EGR_TIMESTAMP_INSERTf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_EGR_TIMESTAMP_INSERT_CANCEL */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0,22 , 2, 2, 2);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_EGR_TIMESTAMP_INSERT_CANCELf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* FP_REDIRECT_SET(38b) */

    /* BCMFP_ACTION_REDIRECT_TO_PORT */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 12, 6, 8, -1);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 12, 14 , 1, 0);
    BCMFP_ACTION_CFG_OFFSET_ADD(2, 12, 3, 3, 0);
    BCMFP_ACTION_CFG_OFFSET_ADD(3, 12, 0, 3, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_REDIRECT_TO_PORTf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_REDIRECT_TO_TRUNK */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 12, 6, 8, -1);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 12, 14, 1, 1);
    BCMFP_ACTION_CFG_OFFSET_ADD(2, 12, 3, 3, 0);
    BCMFP_ACTION_CFG_OFFSET_ADD(3, 12, 0, 3, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_REDIRECT_TO_TRUNKf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_UNMODIFIED_REDIRECT_TO_PORT */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 12, 6, 8, -1);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 12, 14, 1, 0);
    BCMFP_ACTION_CFG_OFFSET_ADD(2, 12, 3, 3, 1);
    BCMFP_ACTION_CFG_OFFSET_ADD(3, 12, 0, 3, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_UNMODIFIED_REDIRECT_TO_PORTf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_UNMODIFIED_REDIRECT_TO_TRUNK */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 12, 6, 8, -1);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 12, 14, 1, 1);
    BCMFP_ACTION_CFG_OFFSET_ADD(2, 12, 3, 3, 1);
    BCMFP_ACTION_CFG_OFFSET_ADD(3, 12, 0, 3, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_UNMODIFIED_REDIRECT_TO_TRUNKf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);


    /* BCMFP_ACTION_REDIRECT_TO_NHOP */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 12, 6, 16, -1);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 12, 3, 3, 2);
    BCMFP_ACTION_CFG_OFFSET_ADD(2, 12, 0, 3, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_REDIRECT_TO_NHOPf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_REDIRECT_TO_ECMP */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 12, 6, 12, -1);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 12, 3, 3, 3);
    BCMFP_ACTION_CFG_OFFSET_ADD(2, 12, 0, 3, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_REDIRECT_TO_ECMPf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_REDIRECT_UC_CANCEL */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 12, 0, 3, 2);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_REDIRECT_UC_CANCELf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_REDIRECT_PORTS_BROADCAST */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 12, 23, 2, 0);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 12, 0, 3, 3);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_REDIRECT_PORTS_BROADCAST_PKTf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_REDIRECT_PORTS_BROADCAST_AND */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 12, 0, 3, 4);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_REDIRECT_REMOVE_PORTS_BROADCASTf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_REDIRECT_PORTS_BROADCAST_OR */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 12, 0, 3, 5);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_REDIRECT_ADD_PORTS_BROADCASTf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_REDIRECT_PORTS_VLAN_BROADCAST */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 12, 17, 1, 0);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 12, 23, 2, 1);
    BCMFP_ACTION_CFG_OFFSET_ADD(2, 12, 0, 3, 3);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_REDIRECT_PORTS_VLAN_BROADCASTf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_REDIRECT_PORTS_VLAN_BROADCAST_FP_ING */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 12, 17, 1, 1);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 12, 23, 2, 1);
    BCMFP_ACTION_CFG_OFFSET_ADD(2, 12, 0, 3, 3);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_REDIRECT_PORTS_VLAN_BROADCAST_FP_INGf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_REDIRECT_L2_MC_GROUP_ID */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 12, 23, 2, 2);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 12, 0, 3, 3);
    BCMFP_ACTION_CFG_OFFSET_ADD(2, 12, 6, 10, -1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_REDIRECT_L2_MC_GROUP_IDf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_REDIRECT_L3_MC_NHOP_ID */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 12, 23, 2, 3);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 12, 0, 3, 3);
    BCMFP_ACTION_CFG_OFFSET_ADD(2, 12, 6, 9, -1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_REDIRECT_L3_MC_NHOP_IDf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_FP_ING_AND_REDIRECT_DATA_ID */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, 6, 8, -1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_FP_ING_REMOVE_REDIRECT_DATA_IDf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_FP_ING_OR_REDIRECT_DATA_ID */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, 6, 8, -1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_FP_ING_ADD_REDIRECT_DATA_IDf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* FP_METER_SET */

    /*
     * BCMFP_ACTIONS_IN_METER_SET
     * It is a dummy action to represent all the actions in
     * Meter set. BCMFP_ACTION_SOFT is set to indicate that
     * the action is dummy.
     */
    flags = flags | (BCMFP_ACTION_SOFT);
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, 0, 16, 0);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_METER_ENABLEf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);
    flags = flags & ~(BCMFP_ACTION_SOFT);

    /* FP_COUNTER_SET */
    /* BCMFP_ACTION_FLEX_CTR_R_COUNT */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 3, 21, 2, -1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_FLEX_CTR_R_COUNTf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_FLEX_CTR_Y_COUNT */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 3, 23, 2, -1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_FLEX_CTR_G_COUNTf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_FLEX_CTR_G_COUNT */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 3, 19, 2, -1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_FLEX_CTR_Y_COUNTf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* CTR_ING_EFLEX_OBJECT */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 3, 5, 14, -1);
    fid = FP_EM_POLICY_TEMPLATEt_CTR_ING_EFLEX_OBJECTf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);
    /*
     * BCMFP_ACTIONS_IN_COUNTER_SET
     * It is a dummy action to represent all the actions in
     * counter set.BCMFP_ACTION_SOFT is set to indicate that
     * the action is dummy.
     */
    flags = flags | (BCMFP_ACTION_SOFT);
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 3, 0, 25, 0);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_CTR_ENABLEf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);
    flags = flags & ~(BCMFP_ACTION_SOFT);

    /* DELAYED ACTIONS */

    /* BCMFP_ACTION_FP_DELAYED_DROP_ID */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 5, 0, 7, -1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_FP_DELAYED_DROP_IDf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_DELAYED_DROP_ENABLE */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 5, 7, 1, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_DELAYED_DROP_ENABLEf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_FP_DELAYED_REDIRECT_ID */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 6, 0, 7, -1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_FP_DELAYED_REDIRECT_IDf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_DELAYED_REDIRECT_ENABLE */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(1, 6, 7, 1, 1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_DELAYED_REDIRECT_ENABLEf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    /* BCMFP_ACTION_DELAYED_REDIRECT_PORT */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 6, 8, 8, -1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_DELAYED_REDIRECT_PORTf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);
    /* Exact match class id */

    /* BCMFP_ACTION_EXACT_MATCH_CLASS_ID */
    BCMFP_ACTION_CFG_INIT(unit);
    BCMFP_ACTION_CFG_OFFSET_ADD(0, 0, 0, 12, -1);
    fid = FP_EM_POLICY_TEMPLATEt_ACTION_EXACT_MATCH_CLASS_IDf;
    BCMFP_ACTION_CFG_INSERT(unit, stage, fid, flags);

    stage->action_cfg_db->container_size =
           bcm56990_a0_em_pdd_container_size;
    stage->action_cfg_db->num_containers = 27;

exit:
    SHR_FUNC_EXIT();
}
