#
# file: trunk_ha.yml
# TRUNK YAML file describing the HA data structures
#

#
# This license is set out in https://raw.githubusercontent.com/Broadcom-Network-Switching-Software/OpenBCM/master/Legal/LICENSE file.
# 
# Copyright 2007-2020 Broadcom Inc. All rights reserved.
#

component:
   bcmcth_trunk:
       bcmcth_trunk_group_t:
           type: struct
           attrib:
               version: 1
           fields:
               inserted:
                   type: uint8_t
                   comment: Indicate that this entry was set or not.
               lb_mode:
                   type: uint8_t
                   comment: Loading balancing mode.
               uc_rtag:
                   type: uint8_t
                   comment: Hash rule tag for unicast packets.
               uc_max_members:
                   type: uint16_t
                   comment: Assumed value of max members.
               uc_base_ptr:
                   type: uint32_t
                   comment: Base ptr of group in TRUNK_MEMBER table.
               uc_cnt:
                   type: uint16_t
                   comment: Acutal count of unicast members.
               uc_modid:
                   type: uint8_t
                   length: 256
                   comment: Pointer to uc modid array.
               uc_modport:
                   type: uint16_t
                   length: 256
                   comment: Pointer to uc modport array.
               uc_agm_pool:
                   type: uint8_t
                   comment: Aggregation group monitor pool.
               uc_agm_id:
                   type: uint8_t
                   comment: Aggregation group monitor ID.
               nonuc_cnt:
                   type: uint16_t
                   comment: Actual members cnt for nonuc packets.
               nonuc_modid:
                   type: uint8_t
                   length: 256
                   comment: Pointer to nonuc modid array.
               nonuc_modport:
                   type: uint16_t
                   length: 256
                   comment: Pointer to nonuc modport array.
       bcmcth_trunk_fast_group_t:
           type: struct
           attrib:
               version: 1
           fields:
               inserted:
                   type: uint8_t
                   comment: Indicate that this entry was set or not.
               lb_mode:
                   type: uint8_t
                   comment: Loading balancing mode.
               uc_rtag:
                   type: uint8_t
                   comment: Hash rule tag for unicast packets.
               uc_cnt:
                   type: uint8_t
                   comment: Acutal count of unicast members.
               uc_modid:
                   type: uint8_t
                   length: 64
                   comment: Pointer to uc modid array.
               uc_modport:
                   type: uint16_t
                   length: 64
                   comment: Pointer to uc modport array.
               uc_agm_pool:
                   type: uint8_t
                   comment: Aggregation group monitor pool.
               uc_agm_id:
                   type: uint8_t
                   comment: Aggregation group monitor ID.
               nonuc_cnt:
                   type: uint8_t
                   comment: Actual members cnt for nonuc packets.
               nonuc_modid:
                   type: uint8_t
                   length: 64
                   comment: Pointer to nonuc modid array.
               nonuc_modport:
                   type: uint16_t
                   length: 64
                   comment: Pointer to nonuc modport array.
               ing_eflex_action_id:
                   type: uint8_t
                   comment: Select one enhanced flex counter action from TRUNK_CTR_ING_EFLEX_ACTION logical table.
               ing_eflex_object:
                   type: uint16_t
                   comment: Enhanced flex counter object.
       bcmcth_trunk_failover_t:
           type: struct
           attrib:
               version: 1
           fields:
               set:
                   type: uint8_t
                   comment: Indicate that this entry was set or not.
               rtag:
                   type: uint8_t
                   comment: Rule tag for failover port selection.
               failover_cnt:
                   type: uint8_t
                   comment: Failover ports count.
               failover_modid:
                   type: uint8_t
                   length: 8
                   comment: Pointer to failover modid array.
               failover_modport:
                   type: uint16_t
                   length: 8
                   comment: Pointer to failover modport array.
       bcmcth_trunk_imm_group_t:
           type: struct
           attrib:
               version: 1
           fields:
               inserted:
                   type: bool
                   comment: Indicate that this entry was set or not.
               uc_max_members:
                   type: uint16_t
                   comment: Assumed value of max members.
               uc_cnt:
                   type: uint16_t
                   comment: Acutal count of unicast members.
               uc_system_port:
                   type: uint16_t
                   length: 128
                   comment: Pointer to unicast system port array.
               l2_eif:
                   type: uint16_t
                   length: 128
                   comment: Pointer to l2 EIF interface array.
               uc_egr_block:
                   type: uint32_t
                   length: 4
                   comment: Egress disable flag for unicast system ports.
               nonuc_cnt:
                   type: uint16_t
                   comment: Acutal count of nonunicast system port members.
               nonuc_system_port:
                   type: uint16_t
                   length: 128
                   comment: Pointer to nonunicast system port array.
               nonuc_egr_block:
                   type: uint32_t
                   length: 4
                   comment: Egress disable flag for non-unicast system ports.
               base_ptr:
                  type: uint32_t
                  comment: Base ptr of group in trunk group member table.
       bcmcth_trunk_imm_group_ha_blk_t:
           type: struct
           attrib:
               version: 1
           fields:
               signature:
                   type: uint32_t
                   comment: Block validation.
               array_size:
                   type: uint32_t
                   comment: indicate the array size of group_array.
               group_array:
                   type: bcmcth_trunk_imm_group_t
                   table:
                   size: array_size
                   comment: trunk group array.
       bcmcth_trunk_imm_group_mbmp_ha_blk_t:
           type: struct
           attrib:
               version: 1
           fields:
               signature:
                   type: uint32_t
                   comment: Block validation.
               array_size:
                   type: uint32_t
                   comment: indicate the array size of group bitmap mbmp.
               mbmp:
                   type: uint32_t
                   table:
                   size: array_size
                   comment: trunk group bitmap.
       bcmcth_trunk_imm_sys_group_t:
           type: struct
           attrib:
               version: 1
           fields:
               inserted:
                   type: bool
                   comment: Indicate that this entry was set or not.
               base_ptr:
                  type: uint32_t
                  comment: Base ptr of group in system trunk group member table.
               max_members:
                   type: uint16_t
                   comment: Assumed value of max members.
               cnt:
                   type: uint16_t
                   comment: Acutal count of members.
       bcmcth_trunk_imm_sys_group_ha_blk_t:
           type: struct
           attrib:
                version: 1
           fields:
               signature:
                   type: uint32_t
                   comment: Block validation.
               array_size:
                   type: uint32_t
                   comment: Indicate the array size of sys_grp_array.
               sys_grp_array:
                   type: bcmcth_trunk_imm_sys_group_t
                   table:
                   size: array_size
                   comment: System trunk group array.
       bcmcth_trunk_imm_sys_group_mbmp_ha_blk_t:
           type: struct
           attrib:
               version: 1
           fields:
               signature:
                   type: uint32_t
                   comment: Block validation.
               array_size:
                   type: uint32_t
                   comment: Indicate the array size of system group bitmap mbmp.
               mbmp:
                   type: uint32_t
                   table:
                   size: array_size
                   comment: System trunk group bitmap.
       bcmcth_trunk_vp_hw_entry_attr_t:
           type: struct
           fields:
               flags:
                   type: uint8_t
                   comment: Entry property flags value.
       bcmcth_trunk_vp_grp_attr_t:
           type: struct
           fields:
               trans_id:
                   type: uint32_t
                   comment: Transaction identifer of this group.
               grp_type:
                   type: uint32_t
                   comment: Trunk VP group lookup type.
               glt_sid:
                   type: uint32_t
                   comment: Logical table identifier.
               lb_mode:
                   type: uint32_t
                   comment: Loading balancing mode.
               max_members:
                   type: uint32_t
                   comment: Maximum paths supported.
               member_cnt:
                   type: uint32_t
                   comment: Number of paths configured.
               mstart_idx:
                   type: int
                   comment: Group members start index in trunk VP member table.
               in_use_itbm:
                   type: bool
                   comment: Flag indicating if the group is using itbm resource.
       bcmcth_trunk_vp_hw_entry_ha_blk_t:
           type: struct
           fields:
               signature:
                   type: uint32_t
                   comment: Block validation.
               array_size:
                   type: uint32_t
                   comment: How many hw entries need be allocated.
               array:
                   type: bcmcth_trunk_vp_hw_entry_attr_t
                   table:
                   size: array_size
                   comment: HW entries array.
       bcmcth_trunk_vp_grp_ha_blk_t:
           type: struct
           fields:
               signature:
                   type: uint32_t
                   comment: Block validation.
               array_size:
                   type: uint32_t
                   comment: How many group entries need be allocated.
               array:
                   type: bcmcth_trunk_vp_grp_attr_t
                   table:
                   size: array_size
                   comment: Group entries array.

