/*
 * DO NOT EDIT THIS FILE!
 * This file is auto-generated.
 * Edits to this file will be lost when it is regenerated.
 *
 * This license is set out in https://raw.githubusercontent.com/Broadcom-Network-Switching-Software/OpenBCM/master/Legal/LICENSE file.
 * 
 * Copyright 2007-2020 Broadcom Inc. All rights reserved.
 */

#include <bcm/types.h>

#include <bcm_int/ltsw/mbcm/trunk.h>
#include <bcm_int/ltsw/mbcm/mbcm.h>

#include <shr/shr_debug.h>

/******************************************************************************
 * Local definitions
 */

#define BSL_LOG_MODULE BSL_LS_BCM_TRUNK

/*!
 * \brief The Trunk mbcm drivers.
 */
static mbcm_ltsw_trunk_drv_t mbcm_ltsw_trunk_drv[BCM_MAX_NUM_UNITS];

/******************************************************************************
 * Private functions
 */

/******************************************************************************
 * Public functions
 */

int
mbcm_ltsw_trunk_drv_set(
    int unit,
    mbcm_ltsw_trunk_drv_t *drv)
{
    mbcm_ltsw_trunk_drv_t *local = &mbcm_ltsw_trunk_drv[unit];

    SHR_FUNC_ENTER(unit);


    mbcm_ltsw_drv_init((mbcm_ltsw_drv_t *)local,
                       (mbcm_ltsw_drv_t *)drv,
                       sizeof(*local)/MBCM_LTSW_FNPTR_SZ);

    SHR_EXIT();

exit:
    SHR_FUNC_EXIT();
}

int
mbcm_ltsw_trunk_type_id_to_l2_dest(
    int unit,
    bcmint_trunk_type_t t_type,
    bcmint_trunk_id_t t_id,
    bcmint_trunk_priv_info_t *t_priv,
    int *l2_dest)
{
    SHR_FUNC_ENTER(unit);

    SHR_IF_ERR_VERBOSE_EXIT
        (mbcm_ltsw_trunk_drv[unit].trunk_type_id_to_l2_dest(unit, t_type, t_id, t_priv, l2_dest));

exit:
    SHR_FUNC_EXIT();
}

int
mbcm_ltsw_trunk_l2_dest_to_type_id(
    int unit,
    int l2_dest,
    bcmint_trunk_type_t *t_type,
    bcmint_trunk_id_t *t_id)
{
    SHR_FUNC_ENTER(unit);

    SHR_IF_ERR_VERBOSE_EXIT
        (mbcm_ltsw_trunk_drv[unit].trunk_l2_dest_to_type_id(unit, l2_dest, t_type, t_id));

exit:
    SHR_FUNC_EXIT();
}

int
mbcm_ltsw_trunk_gport_is_channelized_access_port(
    int unit,
    bcm_gport_t gport,
    bool *is_channelized_access_port)
{
    SHR_FUNC_ENTER(unit);

    SHR_IF_ERR_VERBOSE_EXIT
        (mbcm_ltsw_trunk_drv[unit].trunk_gport_is_channelized_access_port(unit, gport, is_channelized_access_port));

exit:
    SHR_FUNC_EXIT();
}

int
mbcm_ltsw_trunk_pub_info_get(
    int unit,
    bcmint_trunk_pub_info_t *t_pub)
{
    SHR_FUNC_ENTER(unit);

    SHR_IF_ERR_VERBOSE_EXIT
        (mbcm_ltsw_trunk_drv[unit].trunk_pub_info_get(unit, t_pub));

exit:
    SHR_FUNC_EXIT();
}

int
mbcm_ltsw_trunk_psc_compare(
    int unit,
    bcmint_trunk_type_t t_type,
    int psc0,
    int psc1,
    int exact,
    bool *result)
{
    SHR_FUNC_ENTER(unit);

    SHR_IF_ERR_VERBOSE_EXIT
        (mbcm_ltsw_trunk_drv[unit].trunk_psc_compare(unit, t_type, psc0, psc1, exact, result));

exit:
    SHR_FUNC_EXIT();
}

int
mbcm_ltsw_trunk_init(int unit)
{
    SHR_FUNC_ENTER(unit);

    SHR_IF_ERR_VERBOSE_EXIT
        (mbcm_ltsw_trunk_drv[unit].trunk_init(unit));

exit:
    SHR_FUNC_EXIT();
}

int
mbcm_ltsw_trunk_detach(int unit)
{
    SHR_FUNC_ENTER(unit);

    SHR_IF_ERR_VERBOSE_EXIT
        (mbcm_ltsw_trunk_drv[unit].trunk_detach(unit));

exit:
    SHR_FUNC_EXIT();
}

int
mbcm_ltsw_trunk_clear(int unit)
{
    SHR_FUNC_ENTER(unit);

    SHR_IF_ERR_VERBOSE_EXIT
        (mbcm_ltsw_trunk_drv[unit].trunk_clear(unit));

exit:
    SHR_FUNC_EXIT();
}

int
mbcm_ltsw_trunk_create(
    int unit,
    bcmint_trunk_id_t t_id,
    bcmint_trunk_type_t t_type,
    bcmint_trunk_priv_info_t *t_priv)
{
    SHR_FUNC_ENTER(unit);

    SHR_IF_ERR_VERBOSE_EXIT
        (mbcm_ltsw_trunk_drv[unit].trunk_create(unit, t_id, t_type, t_priv));

exit:
    SHR_FUNC_EXIT();
}

int
mbcm_ltsw_trunk_params_validate(
    int unit,
    bcmint_trunk_id_t t_id,
    bcmint_trunk_type_t t_type,
    bcm_trunk_info_t *trunk_info,
    int member_count,
    bcm_trunk_member_t *member_array,
    int op,
    bcm_trunk_member_t *member)
{
    SHR_FUNC_ENTER(unit);

    SHR_IF_ERR_VERBOSE_EXIT
        (mbcm_ltsw_trunk_drv[unit].trunk_params_validate(unit, t_id, t_type, trunk_info, member_count, member_array, op, member));

exit:
    SHR_FUNC_EXIT();
}

int
mbcm_ltsw_trunk_get(
    int unit,
    bcmint_trunk_id_t t_id,
    bcmint_trunk_type_t t_type,
    bcmint_trunk_priv_info_t *t_priv,
    bcm_trunk_info_t *trunk_info,
    int member_max,
    bcm_trunk_member_t *member_array,
    int *member_count)
{
    SHR_FUNC_ENTER(unit);

    SHR_IF_ERR_VERBOSE_EXIT
        (mbcm_ltsw_trunk_drv[unit].trunk_get(unit, t_id, t_type, t_priv, trunk_info, member_max, member_array, member_count));

exit:
    SHR_FUNC_EXIT();
}

int
mbcm_ltsw_trunk_update(
    int unit,
    bcmint_trunk_id_t t_id,
    bcmint_trunk_type_t t_type,
    bcm_trunk_info_t *trunk_info,
    int member_count,
    bcm_trunk_member_t *member_array,
    int op,
    bcm_trunk_member_t *member,
    bcmint_trunk_priv_info_t *t_priv,
    bcmint_trunk_update_info_t *t_update)
{
    SHR_FUNC_ENTER(unit);

    SHR_IF_ERR_VERBOSE_EXIT
        (mbcm_ltsw_trunk_drv[unit].trunk_update(unit, t_id, t_type, trunk_info, member_count, member_array, op, member, t_priv, t_update));

exit:
    SHR_FUNC_EXIT();
}

int
mbcm_ltsw_trunk_destroy(
    int unit,
    bcmint_trunk_id_t t_id,
    bcmint_trunk_type_t t_type,
    bcmint_trunk_priv_info_t *t_priv)
{
    SHR_FUNC_ENTER(unit);

    SHR_IF_ERR_VERBOSE_EXIT
        (mbcm_ltsw_trunk_drv[unit].trunk_destroy(unit, t_id, t_type, t_priv));

exit:
    SHR_FUNC_EXIT();
}

int
mbcm_ltsw_trunk_find(
    int unit,
    bcm_gport_t gport,
    bcmint_trunk_id_t *t_id,
    bcmint_trunk_type_t *t_type)
{
    SHR_FUNC_ENTER(unit);

    SHR_IF_ERR_VERBOSE_EXIT
        (mbcm_ltsw_trunk_drv[unit].trunk_find(unit, gport, t_id, t_type));

exit:
    SHR_FUNC_EXIT();
}

int
mbcm_ltsw_trunk_find_virtual(
    int unit,
    bcm_gport_t gport,
    int *vp_lag_vp)
{
    SHR_FUNC_ENTER(unit);

    SHR_IF_ERR_VERBOSE_EXIT
        (mbcm_ltsw_trunk_drv[unit].trunk_find_virtual(unit, gport, vp_lag_vp));

exit:
    SHR_FUNC_EXIT();
}

int
mbcm_ltsw_trunk_notify(
    int unit,
    bcmint_trunk_id_t t_id,
    bcmint_trunk_type_t t_type)
{
    SHR_FUNC_ENTER(unit);

    SHR_IF_ERR_VERBOSE_EXIT
        (mbcm_ltsw_trunk_drv[unit].trunk_notify(unit, t_id, t_type));

exit:
    SHR_FUNC_EXIT();
}

int
mbcm_ltsw_trunk_failover_flags_extract(
    int unit,
    uint32_t flags,
    bcmint_trunk_type_t t_type,
    uint32_t *fail_flags)
{
    SHR_FUNC_ENTER(unit);

    SHR_IF_ERR_VERBOSE_EXIT
        (mbcm_ltsw_trunk_drv[unit].trunk_failover_flags_extract(unit, flags, t_type, fail_flags));

exit:
    SHR_FUNC_EXIT();
}

int
mbcm_ltsw_trunk_failover_psc_validate(
    int unit,
    bcmint_trunk_type_t t_type,
    int psc)
{
    SHR_FUNC_ENTER(unit);

    SHR_IF_ERR_VERBOSE_EXIT
        (mbcm_ltsw_trunk_drv[unit].trunk_failover_psc_validate(unit, t_type, psc));

exit:
    SHR_FUNC_EXIT();
}

int
mbcm_ltsw_trunk_failover_set(
    int unit,
    bcmint_trunk_id_t t_id,
    bcmint_trunk_type_t t_type,
    bcm_gport_t fail_port,
    int psc,
    int ftp_count,
    bcm_gport_t *ftp)
{
    SHR_FUNC_ENTER(unit);

    SHR_IF_ERR_VERBOSE_EXIT
        (mbcm_ltsw_trunk_drv[unit].trunk_failover_set(unit, t_id, t_type, fail_port, psc, ftp_count, ftp));

exit:
    SHR_FUNC_EXIT();
}

int
mbcm_ltsw_trunk_failover_get(
    int unit,
    bcmint_trunk_id_t t_id,
    bcmint_trunk_type_t t_type,
    bcm_gport_t fail_port,
    int *psc,
    int ftp_max,
    bcm_gport_t *ftp,
    int *ftp_count)
{
    SHR_FUNC_ENTER(unit);

    SHR_IF_ERR_VERBOSE_EXIT
        (mbcm_ltsw_trunk_drv[unit].trunk_failover_get(unit, t_id, t_type, fail_port, psc, ftp_max, ftp, ftp_count));

exit:
    SHR_FUNC_EXIT();
}

int
mbcm_ltsw_trunk_failover_update(
    int unit,
    bcmint_trunk_id_t t_id,
    bcmint_trunk_type_t t_type,
    int psc,
    uint32_t fail_flags,
    bcm_gport_t fail_port,
    int ftp_max,
    int member_count,
    bcm_trunk_member_t *member_array)
{
    SHR_FUNC_ENTER(unit);

    SHR_IF_ERR_VERBOSE_EXIT
        (mbcm_ltsw_trunk_drv[unit].trunk_failover_update(unit, t_id, t_type, psc, fail_flags, fail_port, ftp_max, member_count, member_array));

exit:
    SHR_FUNC_EXIT();
}

int
mbcm_ltsw_trunk_override_set(
    int unit,
    bcmint_trunk_id_t t_id,
    bcmint_trunk_override_type_t o_type,
    int o_index,
    int enable)
{
    SHR_FUNC_ENTER(unit);

    SHR_IF_ERR_VERBOSE_EXIT
        (mbcm_ltsw_trunk_drv[unit].trunk_override_set(unit, t_id, o_type, o_index, enable));

exit:
    SHR_FUNC_EXIT();
}

int
mbcm_ltsw_trunk_override_get(
    int unit,
    bcmint_trunk_id_t t_id,
    bcmint_trunk_override_type_t o_type,
    int o_index,
    int *enable)
{
    SHR_FUNC_ENTER(unit);

    SHR_IF_ERR_VERBOSE_EXIT
        (mbcm_ltsw_trunk_drv[unit].trunk_override_get(unit, t_id, o_type, o_index, enable));

exit:
    SHR_FUNC_EXIT();
}

int
mbcm_ltsw_trunk_member_status_set(
    int unit,
    bcm_port_t port,
    int status)
{
    SHR_FUNC_ENTER(unit);

    SHR_IF_ERR_VERBOSE_EXIT
        (mbcm_ltsw_trunk_drv[unit].trunk_member_status_set(unit, port, status));

exit:
    SHR_FUNC_EXIT();
}

int
mbcm_ltsw_trunk_member_status_get(
    int unit,
    bcm_port_t port,
    int *status)
{
    SHR_FUNC_ENTER(unit);

    SHR_IF_ERR_VERBOSE_EXIT
        (mbcm_ltsw_trunk_drv[unit].trunk_member_status_get(unit, port, status));

exit:
    SHR_FUNC_EXIT();
}

int
mbcm_ltsw_trunk_bitmap_expand(
    int unit,
    bcmint_trunk_pub_info_t *t_pub,
    bcm_pbmp_t *pbmp)
{
    SHR_FUNC_ENTER(unit);

    SHR_IF_ERR_VERBOSE_EXIT
        (mbcm_ltsw_trunk_drv[unit].trunk_bitmap_expand(unit, t_pub, pbmp));

exit:
    SHR_FUNC_EXIT();
}

int
mbcm_ltsw_trunk_mcast_join(
    int unit,
    bcm_trunk_t t_id,
    bcm_vlan_t vid,
    bcm_mac_t mac)
{
    SHR_FUNC_ENTER(unit);

    SHR_IF_ERR_VERBOSE_EXIT
        (mbcm_ltsw_trunk_drv[unit].trunk_mcast_join(unit, t_id, vid, mac));

exit:
    SHR_FUNC_EXIT();
}

int
mbcm_ltsw_trunk_find_dlb_id(
    int unit,
    bcmint_trunk_type_t t_type,
    bcmint_trunk_id_t t_id,
    bcmint_trunk_priv_info_t *t_priv,
    int *dlb_id)
{
    SHR_FUNC_ENTER(unit);

    SHR_IF_ERR_VERBOSE_EXIT
        (mbcm_ltsw_trunk_drv[unit].trunk_find_dlb_id(unit, t_type, t_id, t_priv, dlb_id));

exit:
    SHR_FUNC_EXIT();
}

int
mbcm_ltsw_trunk_vp_lag_member_update(
    int unit,
    int vp_lag_vp,
    bcm_gport_t gport)
{
    SHR_FUNC_ENTER(unit);

    SHR_IF_ERR_VERBOSE_EXIT
        (mbcm_ltsw_trunk_drv[unit].trunk_vp_lag_member_update(unit, vp_lag_vp, gport));

exit:
    SHR_FUNC_EXIT();
}

int
mbcm_ltsw_trunk_vp_lag_vp_learn_get(
    int unit,
    int vp_lag_vp,
    uint32_t *flags)
{
    SHR_FUNC_ENTER(unit);

    SHR_IF_ERR_VERBOSE_EXIT
        (mbcm_ltsw_trunk_drv[unit].trunk_vp_lag_vp_learn_get(unit, vp_lag_vp, flags));

exit:
    SHR_FUNC_EXIT();
}

int
mbcm_ltsw_trunk_vp_lag_vp_learn_set(
    int unit,
    int vp_lag_vp,
    uint32_t flags)
{
    SHR_FUNC_ENTER(unit);

    SHR_IF_ERR_VERBOSE_EXIT
        (mbcm_ltsw_trunk_drv[unit].trunk_vp_lag_vp_learn_set(unit, vp_lag_vp, flags));

exit:
    SHR_FUNC_EXIT();
}

int
mbcm_ltsw_trunk_sc_hash_control_set(
    int unit,
    uint32_t arg)
{
    SHR_FUNC_ENTER(unit);

    SHR_IF_ERR_VERBOSE_EXIT
        (mbcm_ltsw_trunk_drv[unit].trunk_sc_hash_control_set(unit, arg));

exit:
    SHR_FUNC_EXIT();
}

int
mbcm_ltsw_trunk_sc_hash_control_get(
    int unit,
    uint32_t *arg)
{
    SHR_FUNC_ENTER(unit);

    SHR_IF_ERR_VERBOSE_EXIT
        (mbcm_ltsw_trunk_drv[unit].trunk_sc_hash_control_get(unit, arg));

exit:
    SHR_FUNC_EXIT();
}

int
mbcm_ltsw_trunk_sc_lb_control_unicast_set(
    int unit,
    uint32_t arg)
{
    SHR_FUNC_ENTER(unit);

    SHR_IF_ERR_VERBOSE_EXIT
        (mbcm_ltsw_trunk_drv[unit].trunk_sc_lb_control_unicast_set(unit, arg));

exit:
    SHR_FUNC_EXIT();
}

int
mbcm_ltsw_trunk_sc_lb_control_unicast_get(
    int unit,
    uint32_t *arg)
{
    SHR_FUNC_ENTER(unit);

    SHR_IF_ERR_VERBOSE_EXIT
        (mbcm_ltsw_trunk_drv[unit].trunk_sc_lb_control_unicast_get(unit, arg));

exit:
    SHR_FUNC_EXIT();
}

int
mbcm_ltsw_trunk_sc_lb_control_nonunicast_set(
    int unit,
    uint32_t arg)
{
    SHR_FUNC_ENTER(unit);

    SHR_IF_ERR_VERBOSE_EXIT
        (mbcm_ltsw_trunk_drv[unit].trunk_sc_lb_control_nonunicast_set(unit, arg));

exit:
    SHR_FUNC_EXIT();
}

int
mbcm_ltsw_trunk_sc_lb_control_nonunicast_get(
    int unit,
    uint32_t *arg)
{
    SHR_FUNC_ENTER(unit);

    SHR_IF_ERR_VERBOSE_EXIT
        (mbcm_ltsw_trunk_drv[unit].trunk_sc_lb_control_nonunicast_get(unit, arg));

exit:
    SHR_FUNC_EXIT();
}

int
mbcm_ltsw_trunk_flexctr_attach(
    int unit,
    bcm_trunk_t tid,
    bcmi_ltsw_flexctr_counter_info_t *info)
{
    SHR_FUNC_ENTER(unit);

    SHR_IF_ERR_VERBOSE_EXIT
        (mbcm_ltsw_trunk_drv[unit].trunk_flexctr_attach(unit, tid, info));

exit:
    SHR_FUNC_EXIT();
}

int
mbcm_ltsw_trunk_flexctr_detach(
    int unit,
    bcm_trunk_t tid)
{
    SHR_FUNC_ENTER(unit);

    SHR_IF_ERR_VERBOSE_EXIT
        (mbcm_ltsw_trunk_drv[unit].trunk_flexctr_detach(unit, tid));

exit:
    SHR_FUNC_EXIT();
}

int
mbcm_ltsw_trunk_flexctr_info_get(
    int unit,
    bcm_trunk_t tid,
    bcmi_ltsw_flexctr_counter_info_t *info)
{
    SHR_FUNC_ENTER(unit);

    SHR_IF_ERR_VERBOSE_EXIT
        (mbcm_ltsw_trunk_drv[unit].trunk_flexctr_info_get(unit, tid, info));

exit:
    SHR_FUNC_EXIT();
}

int
mbcm_ltsw_trunk_flexctr_object_set(
    int unit,
    bcm_trunk_t tid,
    uint16_t value)
{
    SHR_FUNC_ENTER(unit);

    SHR_IF_ERR_VERBOSE_EXIT
        (mbcm_ltsw_trunk_drv[unit].trunk_flexctr_object_set(unit, tid, value));

exit:
    SHR_FUNC_EXIT();
}

int
mbcm_ltsw_trunk_flexctr_object_get(
    int unit,
    bcm_trunk_t tid,
    uint16_t *value)
{
    SHR_FUNC_ENTER(unit);

    SHR_IF_ERR_VERBOSE_EXIT
        (mbcm_ltsw_trunk_drv[unit].trunk_flexctr_object_get(unit, tid, value));

exit:
    SHR_FUNC_EXIT();
}

