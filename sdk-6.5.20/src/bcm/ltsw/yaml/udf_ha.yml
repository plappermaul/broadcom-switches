#
# file: udf_ha.yml
# UDF YMAL file describing HA data structures
#

#
# This license is set out in https://raw.githubusercontent.com/Broadcom-Network-Switching-Software/OpenBCM/master/Legal/LICENSE file.
# 
# Copyright 2007-2020 Broadcom Inc. All rights reserved.
#

consts:
    BCMINT_UDF_HA_UDF_CHUNKS_MAX: 16
    BCMINT_UDF_HA_UDF_ID_LIST_MAX: 512

component:
    bcmint_udf:
        bcmint_udf_offset_info_t:
            type: struct
            attrib:
                version: 1
            fields:
                udf_id:
                    type: int
                    comment: UDF Object Identifier
                layer:
                    type: int
                    comment: UDF base offset. bcmUdfLayerXxx
                start:
                    type: uint8_t
                    comment: Relative offset from 'layer' in the packet (in bytes)
                width:
                    type: uint8_t
                    comment: Width of data to extract (in bytes)
                flags:
                    type: uint32_t
                    comment: UDF object flags
                grp_id:
                    type: uint8_t
                    comment: Base UDF chunk Id
                byte_bmap:
                    type: uint32_t
                    comment: Bitmap in bytes for used chunks
                num_pkt_formats:
                    type: uint16_t
                    comment: Number of packet format associated with the UDF
                pipe:
                    type: int
                    comment: Pipe number for UDF
        bcmint_udf_pkt_format_info_t:
            type: struct
            attrib:
                version: 1
            fields:
                pkt_fmt_id:
                    type: int
                    comment: UDF packt format Object Identifier
                flags:
                    type: uint16_t
                    comment: UDF packet format object flags
                priority:
                    type: uint16_t
                    comment: Priority of the UDF
                ethertype:
                    type: uint16_t
                    comment: Ethertype in the packet
                ethertype_mask:
                    type: uint16_t
                    comment: Ethertype Mask
                ip_protocol:
                    type: uint8_t
                    comment: IP Protocol in the packet
                ip_protocol_mask:
                    type: uint8_t
                    comment: IP Protocol Mask
                l2:
                    type: uint8_t
                    comment: L2 packet format (BCM_PKT_FORMAT_L2_XXX)
                vlan_tag:
                    type: uint8_t
                    comment: Vlan tag format (BCM_PKT_FORMAT_VLAN_XXX)
                outer_ip:
                    type: uint8_t
                    comment: Outer IP header type (BCM_PKT_FORMAT_IP_XXX)
                inner_ip:
                    type: uint8_t
                    comment: Inner IP header type (BCM_PKT_FORMAT_IP_XXX)
                tunnel:
                    type: uint8_t
                    comment: Tunnel type (BCM_PKT_FORMAT_TUNNEL_XXX)
                mpls:
                    type: uint8_t
                    comment: Mpls labels (BCM_PKT_FORMAT_MPLS_XXX)
                misc_en_fields:
                    type: uint32_t
                    comment: Boolean Key fields
                inner_protocol:
                    type: uint8_t
                    comment: Inner protocol field in the packet
                inner_protocol_mask:
                    type: uint8_t
                    comment: Inner protocol mask
                l4_dst_port:
                    type: uint16_t
                    comment: TCP or UDP Destination Port number
                l4_dst_port_mask:
                    type: uint16_t
                    comment: TCP or UDP Destination Port number mask
                opaque_tag_type:
                    type: uint8_t
                    comment: Tag type field in the opaque tag
                opaque_tag_type_mask:
                    type: uint8_t
                    comment: Mask for tag type field in the opaque tag
                src_port:
                    type: uint16_t
                    comment: Logical Source Port number
                src_port_mask:
                    type: uint16_t
                    comment: Logical Source Port number mask
                first_2B_after_mpls_bos:
                    type: uint16_t
                    comment: First 2 bytes after BOS in an mpls packet
                first_2B_after_mpls_bos_mask:
                    type: uint16_t
                    comment: Mask for First 2 bytes after BOS in an mpls packet
                class_id:
                    type: uint16_t
                    comment: Class Id associated with UDF packet format
                num_udfs:
                    type: uint16_t
                    length: BCMINT_UDF_HA_UDF_CHUNKS_MAX
                    comment: Number of UDF objects associated per pipe
                udf_id_list:
                    type: int
                    length: BCMINT_UDF_HA_UDF_ID_LIST_MAX
                    comment: List of UDF objects associated
